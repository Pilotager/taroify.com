{"version":3,"sources":["webpack:///../core/src/utils/format/unit.ts","webpack:///../core/src/utils/base.ts","webpack:///../core/src/hooks/use-mounted.ts","webpack:///../core/src/hooks/use-rendered-effect.tsx","webpack:///../core/src/utils/state.ts","webpack:///../core/src/hooks/use-placeholder.tsx","webpack:///../core/src/hooks/use-height.ts","webpack:///../core/src/hooks/use-timeout.ts","webpack:///../core/src/hooks/use-unique-id.ts","webpack:///../core/src/hooks/use-update.ts","webpack:///../core/src/hooks/use-window-resize.tsx","webpack:///../core/src/utils/dom/rect.ts","webpack:///../core/src/utils/dom/element.ts","webpack:///./src/components/block.tsx","webpack:///../icons/src/utils/index.ts","webpack:///../core/src/cell/style/index.ts","webpack:///../core/src/cell/cell-group.context.ts","webpack:///../core/src/cell/base-cell.tsx","webpack:///../core/src/cell/cell-group.tsx","webpack:///../core/src/cell/index.ts","webpack:///../core/src/cell/cell.tsx","webpack:///../core/src/styles/hairline.ts","webpack:///../core/src/utils/raf.ts","webpack:///../core/src/collapse/collapse.context.ts","webpack:///../core/src/collapse/collapse-item.tsx","webpack:///../core/src/collapse/collapse.tsx","webpack:///../core/src/collapse/index.ts","webpack:///./src/pages/display/collapse/index.tsx"],"names":["rootFontSize","addUnitPx","value","undefined","unitToPx","getSizeStyle","originSize","size","width","height","convertRem","replace","getRootFontSize","doc","document","documentElement","fontSize","style","window","getComputedStyle","parseFloat","includes","convertPx","convertVw","innerWidth","convertVh","innerHeight","inBrowser","scripts","inWechat","process","useMounted","cb","useRenderedEffect","effect","deps","destructorRef","useRef","useEffect","nextTick","destructor","current","usePreviousRef","previousRef","usePrevious","state","useRendered","useRenderedRef","stateRef","useToRef","useRefs","refs","setIndexRefs","useCallback","index","el","createRef","useObject","update","useUpdate","currentRef","setObject","newState","getObject","useMemo","object","useValue","options","defaultValue","initialValue","onChange","setValue","newValue","emitChange","getValue","usePlaceholder","contentRef","className","useHeight","elementOrRef","useState","setHeight","getRect","then","children","useTimeout","timerRef","cbRef","msRef","argsRef","stop","clearTimeout","start","callback","ms","args","setTimeout","restart","useUniqueId","updateReducer","num","useReducer","useWindowResize","onWindowResize","offWindowResize","makeRect","top","left","right","bottom","element","elementUnref","isWindow","Promise","resolve","getBoundingClientRect","createNodesRef","boundingClientRect","exec","rect","isRootElement","getRects","selector","rects","querySelectorAll","forEach","oneElement","push","createSelectorQuery","selectAll","uid","val","node","nodeType","tagName","matchSelector","aSelector","bSelector","selectViewport","ancestor","parentNode","select","Block","props","variant","title","classNames","demoPrefixClassname","isIconElement","isValidElement","type","ICON_TYPE","cloneIconElement","cloneElement","restProps","oldProps","newProps","CellGroupContext","createContext","BaseCell","titleClassName","briefClassName","valueClassName","align","brief","clickable","clickableProp","required","bordered","icon","rightIcon","useContext","prefixClassname","CellGroup","inset","Provider","Cell","Group","HAIRLINE_BORDER","HAIRLINE_BORDER_TOP","HAIRLINE_BORDER_LEFT","HAIRLINE_BORDER_BOTTOM","HAIRLINE_BORDER_SURROUND","HAIRLINE_BORDER_TOP_BOTTOM","HAIRLINE_BORDER_UNSET_TOP_BOTTOM","cancelRaf","rafId","requestAnimationFrame","raf","doubleRaf","rafIds","CollapseContext","CollapseItem","disabled","expandIcon","extra","isExpanded","toggleItem","expanded","visibility","setVisibility","expandHeight","setExpandHeight","onTransitionEnd","a","heightPx","toggle","newExpanded","onTitleClick","wrapperStyle","display","onClick","ref","Collapse","valueProp","accordion","onChangeProp","childrenProp","items","useCollapseChildren","__children__","Children","child","key","itemValue","concat","filter","activeKey","Item","BasicCollapse","AccordionCollapse","CollapseWithDisabledWithReadonly","CustomCollapse","CollapseDemo"],"mappings":"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","file":"chunk/76.100c0b39.js","sourcesContent":["import * as _ from \"lodash\"\r\nimport { CSSProperties } from \"react\"\r\n\r\nexport function addUnitPx(value?: string | number): string {\r\n  return value === undefined ? \"\" : `${unitToPx(value)}px`\r\n}\r\n\r\nexport function getSizeStyle(originSize?: string | number): CSSProperties | undefined {\r\n  if (_.isNumber(originSize) || _.isString(originSize)) {\r\n    const size = addUnitPx(originSize)\r\n    return {\r\n      width: size,\r\n      height: size,\r\n    }\r\n  }\r\n  return {}\r\n}\r\n\r\nexport function getZIndexStyle(zIndex?: string | number) {\r\n  const style: CSSProperties = {}\r\n  if (zIndex !== undefined) {\r\n    style.zIndex = +zIndex\r\n  }\r\n  return style\r\n}\r\n\r\n// cache\r\nlet rootFontSize: number\r\n\r\nfunction getRootFontSize() {\r\n  if (!rootFontSize) {\r\n    const doc = document.documentElement\r\n    const fontSize = doc.style.fontSize || window.getComputedStyle(doc).fontSize\r\n\r\n    rootFontSize = parseFloat(fontSize)\r\n  }\r\n\r\n  return rootFontSize\r\n}\r\n\r\nfunction convertPx(value: string) {\r\n  value = value.replace(/px/g, \"\")\r\n  return +value\r\n}\r\n\r\nfunction convertRem(value: string) {\r\n  value = value.replace(/rem/g, \"\")\r\n  return +value * getRootFontSize()\r\n}\r\n\r\nfunction convertVw(value: string) {\r\n  value = value.replace(/vw/g, \"\")\r\n  return (+value * window.innerWidth) / 100\r\n}\r\n\r\nfunction convertVh(value: string) {\r\n  value = value.replace(/vh/g, \"\")\r\n  return (+value * window.innerHeight) / 100\r\n}\r\n\r\nexport function unitToPx(value: string | number): number {\r\n  if (typeof value === \"number\") {\r\n    return value\r\n  }\r\n\r\n  if (value.includes(\"px\")) {\r\n    return convertPx(value)\r\n  }\r\n  if (value.includes(\"rem\")) {\r\n    return convertRem(value)\r\n  }\r\n  if (value.includes(\"vw\")) {\r\n    return convertVw(value)\r\n  }\r\n  if (value.includes(\"vh\")) {\r\n    return convertVh(value)\r\n  }\r\n\r\n  return parseFloat(value)\r\n}\r\n","export function noop() {}\r\n\r\nexport const inBrowser = typeof document !== \"undefined\" && !!document.scripts\r\nexport const inWechat = process.env.TARO_ENV === \"weapp\"\r\nexport const inSwan = process.env.TARO_ENV === \"swan\"\r\nexport const inAlipay = process.env.TARO_ENV === \"alipay\"\r\nexport const inQQ = process.env.TARO_ENV === \"qq\"\r\nexport const inToutiao = process.env.TARO_ENV === \"tt\"\r\n","import useRenderedEffect from \"./use-rendered-effect\"\r\n\r\nexport default function useMounted(cb: (...args: any[]) => any) {\r\n  useRenderedEffect(cb, [])\r\n}\r\n","import { nextTick } from \"@tarojs/taro\"\nimport * as _ from \"lodash\"\nimport { DependencyList, EffectCallback, useEffect, useRef } from \"react\"\n\nfunction useRenderedEffect(effect: EffectCallback, deps?: DependencyList) {\n  const destructorRef = useRef<() => void>()\n\n  useEffect(\n    () => {\n      nextTick(() => {\n        const destructor = effect?.()\n        if (_.isFunction(destructor)) {\n          destructorRef.current = destructor\n        }\n      })\n\n      return destructorRef.current\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    deps,\n  )\n}\n\nexport default useRenderedEffect\n","import * as _ from \"lodash\"\r\nimport { createRef, MutableRefObject, useCallback, useEffect, useMemo, useRef } from \"react\"\r\nimport { useUpdate } from \"../hooks\"\r\n\r\nexport function usePreviousRef<T = any>(value: T): MutableRefObject<T> {\r\n  const previousRef = useRef<T>(value)\r\n  useEffect(() => {\r\n    previousRef.current = value\r\n  })\r\n  return previousRef\r\n}\r\n\r\nexport function usePrevious<T>(state: T): T | undefined {\r\n  return usePreviousRef(state).current\r\n}\r\n\r\ntype UseRenderedCallback<T> = () => T\r\n\r\nexport function useRendered<T = any>(cb: UseRenderedCallback<T>): T {\r\n  return cb?.()\r\n}\r\n\r\nexport function useRenderedRef<T = any>(cb: UseRenderedCallback<T>): MutableRefObject<T> {\r\n  const stateRef = useRef<T>()\r\n  if (cb) {\r\n    stateRef.current = cb()\r\n  }\r\n  return stateRef as MutableRefObject<T>\r\n}\r\n\r\nexport function useToRef<T = any>(value: T): MutableRefObject<T> {\r\n  const stateRef = useRef<T>()\r\n  stateRef.current = value\r\n  return stateRef as MutableRefObject<T>\r\n}\r\n\r\nexport function useRefs<T = Element>() {\r\n  const refs = useRef<MutableRefObject<T>[]>([])\r\n\r\n  const setIndexRefs = useCallback(\r\n    (index: number) => (el: unknown) => {\r\n      if (!refs.current[index]) {\r\n        refs.current[index] = createRef() as MutableRefObject<T>\r\n      }\r\n      refs.current[index].current = el as T\r\n    },\r\n    [],\r\n  )\r\n\r\n  return [refs.current, setIndexRefs] as const\r\n}\r\n\r\nexport function useObject<S>(state: S) {\r\n  const update = useUpdate()\r\n\r\n  const stateRef = useRef(state)\r\n\r\n  const currentRef = useRef<S>()\r\n  const previousRef = useRef<S>()\r\n\r\n  if (!_.isEqual(currentRef.current, state)) {\r\n    previousRef.current = currentRef.current\r\n    currentRef.current = state\r\n    stateRef.current = state\r\n  }\r\n\r\n  const setObject = useCallback(\r\n    (newState: S) => {\r\n      stateRef.current = { ...stateRef.current, ...newState }\r\n      update()\r\n    },\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    [],\r\n  )\r\n\r\n  const getObject = useCallback(() => stateRef.current as S, [])\r\n\r\n  return useMemo(\r\n    () => ({ object: stateRef.current, getObject, setObject }),\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    [stateRef.current, getObject, setObject],\r\n  )\r\n}\r\n\r\ninterface UseValueOptions<S> {\r\n  defaultValue?: S\r\n  initialValue?: S\r\n  value?: S\r\n\r\n  onChange?: (...args: any[]) => void\r\n}\r\n\r\ninterface UseValueReturn<S> {\r\n  value: S | undefined\r\n  getValue: () => S\r\n  setValue: (newValue: S, emitChange?: (aValue: S) => void) => void\r\n}\r\n\r\nexport function useValue<S>(options: UseValueOptions<S> = {}): UseValueReturn<S> {\r\n  const { defaultValue, value, initialValue, onChange } = options\r\n  const update = useUpdate()\r\n  const stateRef = useRef(defaultValue ?? value ?? initialValue)\r\n\r\n  if (value !== undefined) {\r\n    stateRef.current = value\r\n  }\r\n\r\n  const setValue = useCallback(\r\n    (newValue: S, emitChange?: (aValue: S) => void) => {\r\n      if (_.isUndefined(value)) {\r\n        stateRef.current = newValue\r\n        update()\r\n      }\r\n      ;(emitChange ?? onChange)?.(newValue)\r\n    },\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    [onChange],\r\n  )\r\n\r\n  const getValue = useCallback(() => stateRef.current as S, [])\r\n\r\n  return useMemo(\r\n    () => ({ value: stateRef.current, getValue, setValue }),\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    [stateRef.current, getValue, setValue],\r\n  )\r\n}\r\n","import { View } from \"@tarojs/components\"\r\nimport * as React from \"react\"\r\nimport { addUnitPx } from \"../utils/format/unit\"\r\nimport useHeight from \"./use-height\"\r\n\r\ninterface UsePlaceholderOptions {\r\n  className?: string\r\n}\r\n\r\nexport default function usePlaceholder(contentRef: any, { className }: UsePlaceholderOptions) {\r\n  const height = useHeight(contentRef)\r\n\r\n  return ({\r\n    // @ts-ignore\r\n    children,\r\n  }) => (\r\n    <View\r\n      className={className}\r\n      style={{ height: height ? `${addUnitPx(height)}` : \"\" }}\r\n      children={children}\r\n    />\r\n  )\r\n}\r\n","import { useState } from \"react\"\r\nimport { getRect } from \"../utils/dom/rect\"\r\nimport useMounted from \"./use-mounted\"\r\n\r\nexport default function useHeight(elementOrRef: any) {\r\n  const [height, setHeight] = useState<number>(0)\r\n  useMounted(() =>\r\n    getRect(elementOrRef)\r\n      .then(({ height }) => height)\r\n      .then(setHeight),\r\n  )\r\n  return height\r\n}\r\n","import { useCallback, useMemo, useRef } from \"react\"\r\n\r\ntype UseTimeoutCallback = (...args: any[]) => void\r\n\r\nfunction useTimeout() {\r\n  const timerRef = useRef<NodeJS.Timeout>()\r\n\r\n  const cbRef = useRef<UseTimeoutCallback>()\r\n  const msRef = useRef<number>()\r\n  const argsRef = useRef<any[]>()\r\n\r\n  const stop = useCallback(() => {\r\n    if (timerRef.current) {\r\n      clearTimeout(timerRef.current)\r\n      timerRef.current = undefined\r\n    }\r\n  }, [])\r\n\r\n  const start = useCallback((callback: UseTimeoutCallback, ms?: number, ...args: any[]) => {\r\n    if (timerRef.current) {\r\n      return\r\n    }\r\n    cbRef.current = callback\r\n    msRef.current = ms\r\n    argsRef.current = args\r\n    timerRef.current = setTimeout(callback, ms, args)\r\n  }, [])\r\n\r\n  const restart = useCallback(\r\n    (callback?: UseTimeoutCallback, ms?: number, ...args: any[]) => {\r\n      stop()\r\n      if (callback) {\r\n        start(callback, ms, args)\r\n      } else if (cbRef.current) {\r\n        start(cbRef.current, msRef.current, argsRef.current)\r\n      }\r\n    },\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    [],\r\n  )\r\n\r\n  return useMemo(\r\n    () => ({\r\n      restart,\r\n      start,\r\n      stop,\r\n    }),\r\n    [restart, start, stop],\r\n  )\r\n}\r\n\r\nexport default useTimeout\r\n","import * as _ from \"lodash\"\r\nimport { useRef } from \"react\"\r\n\r\nfunction useUniqueId() {\r\n  const uniqueIdRef = useRef(_.uniqueId(\"t_\"))\r\n  return uniqueIdRef.current\r\n}\r\n\r\nexport default useUniqueId\r\n","import { useReducer } from \"react\"\r\n\r\nconst updateReducer = (num: number): number => (num + 1) % 1_000_000\r\n\r\nfunction useUpdate(): () => void {\r\n  const [, update] = useReducer(updateReducer, 0)\r\n\r\n  return update\r\n}\r\n\r\nexport default useUpdate\r\n","import { offWindowResize, onWindowResize } from \"@tarojs/taro\"\r\nimport { useEffect } from \"react\"\r\n\r\ninterface Size {\r\n  /** 变化后的窗口高度，单位 px */\r\n  windowHeight: number\r\n  /** 变化后的窗口宽度，单位 px */\r\n  windowWidth: number\r\n}\r\n\r\ninterface CallbackResult {\r\n  size: Size\r\n}\r\n\r\ntype WindowResizeCallback = (result: CallbackResult) => void\r\n\r\nfunction useWindowResize(callback: WindowResizeCallback) {\r\n  useEffect(() => {\r\n    onWindowResize?.(callback)\r\n\r\n    return () =>\r\n      offWindowResize?.(\r\n        // @ts-ignore\r\n        callback,\r\n      )\r\n  }, [callback])\r\n}\r\n\r\nexport default useWindowResize\r\n","import { createSelectorQuery } from \"@tarojs/taro\"\nimport { inBrowser } from \"../base\"\nimport { createNodesRef, elementUnref, isRootElement, isWindow } from \"./element\"\n\nexport interface Rect {\n  dataset: Record<string, any>\n  id: string\n  top: number\n  right: number\n  bottom: number\n  left: number\n  width: number\n  height: number\n}\n\nexport function makeRect(width: number, height: number) {\n  return {\n    top: 0,\n    left: 0,\n    right: width,\n    bottom: height,\n    width,\n    height,\n  } as Rect\n}\n\nexport function getRect(elementOrRef: any): Promise<Rect> {\n  const element = elementUnref(elementOrRef)\n  if (element) {\n    if (inBrowser) {\n      if (isWindow(element)) {\n        const width = element.innerWidth\n        const height = element.innerHeight\n        return Promise.resolve(makeRect(width, height))\n      }\n\n      return Promise.resolve(\n        (((element as unknown) as HTMLElement).getBoundingClientRect() as unknown) as Rect,\n      )\n    } else {\n      return new Promise<Rect>((resolve) => {\n        createNodesRef(element)\n          .boundingClientRect()\n          .exec(([rect]) => {\n            if (isRootElement(element)) {\n              const { width, height } = rect\n              resolve(makeRect(width, height))\n            } else {\n              resolve(rect)\n            }\n          })\n      })\n    }\n  }\n  return Promise.resolve(makeRect(0, 0))\n}\n\nexport function getRects(elementOrRef: any, selector: string): Promise<Rect[]> {\n  const element = elementUnref(elementOrRef)\n  if (element) {\n    if (inBrowser) {\n      const rects: Rect[] = []\n      ;((element as unknown) as HTMLElement)\n        .querySelectorAll(selector)\n        .forEach((oneElement) =>\n          rects.push((oneElement.getBoundingClientRect() as unknown) as Rect),\n        )\n      return Promise.resolve(rects)\n    } else {\n      return new Promise<Rect[]>((resolve) => {\n        createSelectorQuery()\n          .selectAll(\"#\" + element.uid + selector)\n          .boundingClientRect()\n          .exec(([rects]) => resolve((rects as unknown) as Rect[]))\n      })\n    }\n  }\n  return Promise.resolve([])\n}\n","import { TaroElement } from \"@tarojs/runtime\"\nimport { createSelectorQuery } from \"@tarojs/taro\"\nimport * as _ from \"lodash\"\nimport { inWechat } from \"../base\"\n\nexport const ELEMENT_NODE_TYPE = 1\n\nexport function isWindow(val: unknown): val is Window {\n  return val === window\n}\n\nexport function isBodyElement(val: unknown): boolean {\n  return val === document.body\n}\n\nexport function elementUnref(elementOrRef: any): TaroElement {\n  if (elementOrRef === undefined || elementOrRef === null) {\n    return elementOrRef\n  }\n  if (\"current\" in elementOrRef) {\n    return elementOrRef.current\n  }\n  return elementOrRef\n}\n\nexport function isRootElement(node?: TaroElement) {\n  return node?.nodeType === ELEMENT_NODE_TYPE && node?.tagName === \"ROOT\"\n}\n\nexport function matchSelector(aSelector?: string, bSelector?: string) {\n  return _.replace(aSelector as string, \"#\", \"\") === bSelector\n}\n\nexport function createNodesRef(element: TaroElement) {\n  if (isRootElement(element)) {\n    return createSelectorQuery().selectViewport()\n  }\n\n  // Fix nested in CustomWrapper is undefined\n  // See: https://github.com/mallfoundry/taroify/pull/143\n  if (inWechat) {\n    let ancestor = element\n    while (ancestor.parentNode && !isRootElement(ancestor.parentNode as TaroElement)) {\n      ancestor = ancestor.parentNode as TaroElement\n    }\n\n    if (ancestor && ancestor !== element) {\n      return createSelectorQuery().select(`#${ancestor.uid}>>>#${element.uid}`)\n    }\n  }\n\n  return createSelectorQuery().select(\"#\" + element.uid)\n}\n","import { View } from \"@tarojs/components\"\r\nimport classNames from \"classnames\"\r\nimport * as React from \"react\"\r\nimport { ReactNode } from \"react\"\r\nimport { demoPrefixClassname } from \"../styles/prefix\"\r\nimport \"./block.scss\"\r\n\r\ntype BlockVariant = \"card\"\r\n\r\ninterface BlockProps {\r\n  className?: string\r\n  variant?: BlockVariant\r\n  title?: ReactNode\r\n  children?: ReactNode\r\n}\r\n\r\nexport default function Block(props: BlockProps) {\r\n  const { className, variant, title, children } = props\r\n  return (\r\n    <View className={classNames(demoPrefixClassname(\"block\"), className)}>\r\n      {title && <View className={demoPrefixClassname(\"block__title\")} children={title} />}\r\n      <View\r\n        className={classNames({\r\n          [demoPrefixClassname(\"block__content\")]: variant !== \"card\",\r\n          [demoPrefixClassname(\"block__card\")]: variant === \"card\",\r\n        })}\r\n      >\r\n        {children}\r\n      </View>\r\n    </View>\r\n  )\r\n}\r\n","import classNames from \"classnames\"\r\nimport * as _ from \"lodash\"\r\nimport { cloneElement, isValidElement, ReactElement, ReactNode } from \"react\"\r\nimport { ICON_TYPE, IconProps } from \"../shared\"\r\n\r\nexport function isIconElement(node?: ReactNode): boolean {\r\n  // Is`t not ReactElement\r\n  if (!isValidElement(node)) {\r\n    return false\r\n  }\r\n  const element = node as ReactElement\r\n  return _.hasIn(element.type, ICON_TYPE)\r\n}\r\n\r\nexport function cloneIconElement(node: ReactNode, props: IconProps): ReactNode {\r\n  if (!isIconElement(node)) {\r\n    return isValidElement(node) ? cloneElement(node, props) : node\r\n  }\r\n  const { className, ...restProps } = props\r\n  const element = node as ReactElement\r\n  const { props: oldProps } = element\r\n  const newProps: IconProps = {\r\n    ...oldProps,\r\n    className: classNames(oldProps.className, className),\r\n    ...restProps,\r\n  }\r\n  return cloneElement(element, newProps)\r\n}\r\n","import \"../../styles/style\"\r\nimport \"../index.scss\"\r\n","import { createContext } from \"react\"\r\n\r\ninterface CellGroupContextValue {\r\n  clickable?: boolean\r\n}\r\n\r\nconst CellGroupContext = createContext<CellGroupContextValue>({})\r\n\r\nexport default CellGroupContext\r\n","import { cloneIconElement } from \"@taroify/icons/utils\"\r\nimport { View } from \"@tarojs/components\"\r\nimport { ViewProps } from \"@tarojs/components/types/View\"\r\nimport classNames from \"classnames\"\r\nimport * as React from \"react\"\r\nimport { ReactNode, useContext } from \"react\"\r\nimport { prefixClassname } from \"../styles\"\r\nimport CellGroupContext from \"./cell-group.context\"\r\nimport { CellAlign, CellSize } from \"./cell.shared\"\r\n\r\nexport interface BaseCellProps extends ViewProps {\r\n  titleClassName?: string\r\n  briefClassName?: string\r\n  valueClassName?: string\r\n  size?: CellSize\r\n  align?: CellAlign\r\n  title?: ReactNode\r\n  brief?: ReactNode\r\n  icon?: ReactNode\r\n  rightIcon?: ReactNode\r\n  bordered?: boolean\r\n  required?: boolean\r\n  clickable?: boolean\r\n  children?: ReactNode\r\n}\r\n\r\nfunction BaseCell(props: BaseCellProps) {\r\n  const {\r\n    className,\r\n    titleClassName,\r\n    briefClassName,\r\n    valueClassName,\r\n    size = \"medium\",\r\n    align,\r\n    title,\r\n    brief,\r\n    clickable: clickableProp = false,\r\n    required = false,\r\n    bordered = true,\r\n    icon,\r\n    rightIcon,\r\n    children,\r\n    ...restProps\r\n  } = props\r\n\r\n  const { clickable } = useContext(CellGroupContext)\r\n\r\n  return (\r\n    <View\r\n      className={classNames(\r\n        prefixClassname(\"cell\"),\r\n        {\r\n          [prefixClassname(\"cell--start\")]: align === \"start\",\r\n          [prefixClassname(\"cell--center\")]: align === \"center\",\r\n          [prefixClassname(\"cell--end\")]: align === \"end\",\r\n          [prefixClassname(\"cell--large\")]: size === \"large\",\r\n          [prefixClassname(\"cell--clickable\")]: clickableProp || clickable,\r\n          [prefixClassname(\"cell--required\")]: required,\r\n          [prefixClassname(\"cell--borderless\")]: !bordered,\r\n        },\r\n        className,\r\n      )}\r\n      {...restProps}\r\n    >\r\n      {icon && cloneIconElement(icon, { className: prefixClassname(\"cell__icon\") })}\r\n      {title && (\r\n        <View className={classNames(prefixClassname(\"cell__title\"), titleClassName)}>\r\n          {title}\r\n          {brief && (\r\n            <View\r\n              className={classNames(prefixClassname(\"cell__brief\"), briefClassName)}\r\n              children={brief}\r\n            />\r\n          )}\r\n        </View>\r\n      )}\r\n      {children && (\r\n        <View\r\n          className={classNames(\r\n            prefixClassname(\"cell__value\"),\r\n            {\r\n              [prefixClassname(\"cell__value--alone\")]: !title,\r\n            },\r\n            valueClassName,\r\n          )}\r\n          children={children}\r\n        />\r\n      )}\r\n      {rightIcon && cloneIconElement(rightIcon, { className: prefixClassname(\"cell__right-icon\") })}\r\n    </View>\r\n  )\r\n}\r\n\r\nexport default BaseCell\r\n","import { View } from \"@tarojs/components\"\r\nimport { ViewProps } from \"@tarojs/components/types/View\"\r\nimport classNames from \"classnames\"\r\nimport * as React from \"react\"\r\nimport { ReactNode } from \"react\"\r\nimport { prefixClassname } from \"../styles\"\r\nimport CellGroupContext from \"./cell-group.context\"\r\n\r\ninterface CellGroupProps extends ViewProps {\r\n  title?: ReactNode\r\n  clickable?: boolean\r\n  inset?: boolean\r\n  bordered?: boolean\r\n  children?: ReactNode\r\n}\r\n\r\nexport function CellGroup(props: CellGroupProps) {\r\n  const { title, clickable = false, inset = false, bordered = true, children, ...restProps } = props\r\n  return (\r\n    <CellGroupContext.Provider\r\n      value={{\r\n        clickable,\r\n      }}\r\n    >\r\n      <View\r\n        className={classNames(prefixClassname(\"cell-group\"), {\r\n          [prefixClassname(\"cell-group--inset\")]: inset,\r\n        })}\r\n        {...restProps}\r\n      >\r\n        {title && (\r\n          <View\r\n            className={classNames(prefixClassname(\"cell-group__title\"), {\r\n              [prefixClassname(\"cell-group__title--inset\")]: inset,\r\n            })}\r\n            children={title}\r\n          />\r\n        )}\r\n        <View\r\n          className={classNames(prefixClassname(\"cell-group\"), {\r\n            [prefixClassname(\"hairline--top-bottom\")]: bordered,\r\n          })}\r\n          children={children}\r\n        />\r\n      </View>\r\n    </CellGroupContext.Provider>\r\n  )\r\n}\r\n\r\nexport default CellGroup\r\n","import CellElement, { CellProps } from \"./cell\"\r\nimport CellGroup from \"./cell-group\"\r\n\r\nexport type { CellAlign, CellSize } from \"./cell.shared\"\r\nexport { default as BaseCell } from \"./base-cell\"\r\n\r\ninterface CellInterface {\r\n  (props: CellProps): JSX.Element\r\n\r\n  Group: typeof CellGroup\r\n}\r\n\r\nconst Cell = CellElement as CellInterface\r\nCell.Group = CellGroup\r\n\r\nexport default Cell\r\n","import { ViewProps } from \"@tarojs/components/types/View\"\r\nimport * as React from \"react\"\r\nimport { ReactNode } from \"react\"\r\nimport BaseCell from \"./base-cell\"\r\nimport { CellAlign, CellSize } from \"./cell.shared\"\r\n\r\nexport interface CellProps extends ViewProps {\r\n  size?: CellSize\r\n  align?: CellAlign\r\n  title?: ReactNode\r\n  brief?: ReactNode\r\n  icon?: ReactNode\r\n  rightIcon?: ReactNode\r\n  bordered?: boolean\r\n  clickable?: boolean\r\n  children?: ReactNode\r\n}\r\n\r\nfunction Cell(props: CellProps) {\r\n  return <BaseCell {...props} />\r\n}\r\n\r\nexport default Cell\r\n","import { prefixClassname } from \"./prefix\"\n\nexport const HAIRLINE_BORDER = prefixClassname(\"hairline\")\nexport const HAIRLINE_BORDER_TOP = `${HAIRLINE_BORDER}--top`\nexport const HAIRLINE_BORDER_LEFT = `${HAIRLINE_BORDER}--left`\nexport const HAIRLINE_BORDER_BOTTOM = `${HAIRLINE_BORDER}--bottom`\nexport const HAIRLINE_BORDER_SURROUND = `${HAIRLINE_BORDER}--surround`\nexport const HAIRLINE_BORDER_TOP_BOTTOM = `${HAIRLINE_BORDER}--top-bottom`\nexport const HAIRLINE_BORDER_UNSET_TOP_BOTTOM = `${HAIRLINE_BORDER}-unset--top-bottom`\n","import * as _ from \"lodash\"\nimport * as requestAnimationFrame from \"raf\"\n\nexport function cancelRaf(rafId: number | number[]) {\n  if (_.isNumber(rafId)) {\n    requestAnimationFrame.cancel(rafId)\n  } else if (_.isArray(rafId)) {\n    _.forEach(rafId, cancelRaf)\n  }\n}\n\nexport function raf(cb: FrameRequestCallback) {\n  // @ts-ignore\n  return requestAnimationFrame.default(cb)\n}\n\nexport default raf\n\nexport function doubleRaf(cb: FrameRequestCallback): [number, number] {\n  const rafIds: [number, number] = [0, 0]\n  rafIds[1] = raf(() => {\n    rafIds[0] = raf(cb)\n  })\n  return rafIds\n}\n","import { createContext } from \"react\"\n\ninterface CollapseContextValue {\n  isExpanded?: (dataKey: number | string) => boolean\n  toggleItem?: (dataKey: number | string, expanded: boolean) => void\n}\n\nconst CollapseContext = createContext<CollapseContextValue>({})\n\nexport default CollapseContext\n","import { ArrowRight } from \"@taroify/icons\"\r\nimport { View } from \"@tarojs/components\"\r\nimport { ViewProps } from \"@tarojs/components/types/View\"\r\nimport { nextTick } from \"@tarojs/taro\"\r\nimport classNames from \"classnames\"\r\nimport * as React from \"react\"\r\nimport {\r\n  CSSProperties,\r\n  ReactNode,\r\n  useCallback,\r\n  useContext,\r\n  useEffect,\r\n  useMemo,\r\n  useRef,\r\n  useState,\r\n} from \"react\"\r\nimport Cell from \"../cell\"\r\nimport { prefixClassname } from \"../styles\"\r\nimport { getRect } from \"../utils/dom/rect\"\r\nimport { addUnitPx } from \"../utils/format/unit\"\r\nimport { doubleRaf, raf } from \"../utils/raf\"\r\nimport CollapseContext from \"./collapse.context\"\r\n\r\ntype CollapseItemSize = \"medium\" | \"large\"\r\n\r\ninterface CollapseItemProps extends ViewProps {\r\n  className?: string\r\n  style?: CSSProperties\r\n  value?: any\r\n  size?: CollapseItemSize\r\n  bordered?: boolean\r\n  clickable?: boolean\r\n  disabled?: boolean\r\n  icon?: ReactNode\r\n  expandIcon?: ReactNode\r\n  title?: ReactNode\r\n  brief?: ReactNode\r\n  extra?: ReactNode\r\n  children?: ReactNode\r\n}\r\n\r\nfunction CollapseItem(props: CollapseItemProps) {\r\n  const {\r\n    className,\r\n    value,\r\n    size = \"medium\",\r\n    bordered = true,\r\n    disabled = false,\r\n    clickable = true,\r\n    icon,\r\n    expandIcon = <ArrowRight />,\r\n    title,\r\n    brief,\r\n    extra,\r\n    children,\r\n    ...restProps\r\n  } = props\r\n\r\n  const contentRef = useRef<HTMLElement>()\r\n  const { isExpanded, toggleItem } = useContext(CollapseContext)\r\n  const expanded = isExpanded?.(value)\r\n\r\n  const [visibility, setVisibility] = useState(expanded)\r\n  const [expandHeight, setExpandHeight] = useState(\"0\")\r\n\r\n  const onTransitionEnd = useCallback(() => {\r\n    if (!expanded) {\r\n      setVisibility(false)\r\n    } else {\r\n      setExpandHeight(\"\")\r\n    }\r\n  }, [expanded])\r\n\r\n  useEffect(() => {\r\n    if (expanded) {\r\n      setVisibility(true)\r\n    }\r\n\r\n    // Use raf: flick when opened in safari\r\n    // Use nextTick: closing animation failed when set `user-select: none`\r\n    const tickRaf = expanded ? nextTick : raf\r\n\r\n    tickRaf(async () => {\r\n      const { height } = await getRect(contentRef)\r\n      if (height) {\r\n        const heightPx = addUnitPx(height)\r\n        setExpandHeight(expanded ? \"0\" : heightPx)\r\n\r\n        // use double raf to ensure animation can start\r\n        doubleRaf(() => {\r\n          setExpandHeight(expanded ? heightPx : \"0\")\r\n        })\r\n      } else {\r\n        onTransitionEnd()\r\n      }\r\n    })\r\n  }, [expanded, onTransitionEnd])\r\n\r\n  const toggle = useCallback(\r\n    (newExpanded = !expanded) => {\r\n      toggleItem?.(value, newExpanded)\r\n    },\r\n    [value, expanded, toggleItem],\r\n  )\r\n\r\n  const onTitleClick = useCallback(() => {\r\n    if (!disabled) {\r\n      toggle()\r\n    }\r\n  }, [disabled, toggle])\r\n\r\n  const wrapperStyle = useMemo(\r\n    () => ({\r\n      display: visibility ? \"\" : \"none\",\r\n      height: expandHeight,\r\n    }),\r\n    [expandHeight, visibility],\r\n  )\r\n\r\n  return (\r\n    <View\r\n      className={classNames(\r\n        prefixClassname(\"collapse-item\"),\r\n        {\r\n          [prefixClassname(\"collapse-item--bordered\")]: value && bordered,\r\n        },\r\n        className,\r\n      )}\r\n      {...restProps}\r\n    >\r\n      <Cell\r\n        className={classNames(prefixClassname(\"collapse-item__title\"), {\r\n          [prefixClassname(\"collapse-item__title--disabled\")]: disabled,\r\n          [prefixClassname(\"collapse-item__title--expanded\")]: expanded,\r\n          [prefixClassname(\"collapse-item__title--borderless\")]: !bordered,\r\n        })}\r\n        size={size}\r\n        icon={icon}\r\n        rightIcon={expandIcon}\r\n        title={title}\r\n        clickable={!disabled && clickable}\r\n        brief={brief}\r\n        children={extra}\r\n        onClick={onTitleClick}\r\n      />\r\n      <View\r\n        className={prefixClassname(\"collapse-item__wrapper\")}\r\n        style={wrapperStyle}\r\n        onTransitionEnd={onTransitionEnd}\r\n      >\r\n        <View\r\n          ref={contentRef}\r\n          className={prefixClassname(\"collapse-item__content\")}\r\n          children={children}\r\n        />\r\n      </View>\r\n    </View>\r\n  )\r\n}\r\n\r\nexport default CollapseItem\r\n","import { View } from \"@tarojs/components\"\r\nimport { ViewProps } from \"@tarojs/components/types/View\"\r\nimport classNames from \"classnames\"\r\nimport * as _ from \"lodash\"\r\nimport * as React from \"react\"\r\nimport { Children, cloneElement, isValidElement, ReactElement, ReactNode, useCallback } from \"react\"\r\nimport { prefixClassname } from \"../styles\"\r\nimport { HAIRLINE_BORDER_TOP_BOTTOM } from \"../styles/hairline\"\r\nimport { useValue } from \"../utils/state\"\r\nimport CollapseItem from \"./collapse-item\"\r\nimport CollapseContext from \"./collapse.context\"\r\n\r\nfunction validateActiveValue(value: string | number | Array<string | number>, accordion: boolean) {\r\n  if (accordion && Array.isArray(value)) {\r\n    // eslint-disable-next-line\r\n    console.error('[Taroify] Collapse: \"value\" should not be Array in accordion mode')\r\n    return false\r\n  }\r\n  if (!accordion && !Array.isArray(value)) {\r\n    // eslint-disable-next-line\r\n    console.error('[Taroify] Collapse: \"value\" should be Array in non-accordion mode')\r\n    return false\r\n  }\r\n  return true\r\n}\r\n\r\ninterface CollapseChildren {\r\n  items: ReactNode[]\r\n}\r\n\r\nfunction useCollapseChildren(children?: ReactNode): CollapseChildren {\r\n  const __children__: CollapseChildren = {\r\n    items: [],\r\n  }\r\n\r\n  Children.forEach(children, (child: ReactNode) => {\r\n    if (isValidElement(child)) {\r\n      const element = child as ReactElement\r\n      const elementType = element.type\r\n      if (elementType === CollapseItem) {\r\n        const { key, props } = element\r\n        const index = _.size(__children__.items)\r\n        const { value } = props\r\n        __children__.items?.push(\r\n          cloneElement(element, {\r\n            key: key ?? index,\r\n            value: value ?? index,\r\n          }),\r\n        )\r\n      } else {\r\n        __children__.items?.push(element)\r\n      }\r\n    } else {\r\n      __children__.items?.push(child)\r\n    }\r\n  })\r\n\r\n  return __children__\r\n}\r\n\r\nexport interface CollapseProps extends ViewProps {\r\n  defaultValue?: any\r\n  value?: any\r\n  accordion?: boolean\r\n  bordered?: boolean\r\n  children?: ReactNode\r\n\r\n  onChange?(value: any): void\r\n}\r\n\r\nfunction Collapse(props: CollapseProps) {\r\n  const {\r\n    className,\r\n    bordered,\r\n    defaultValue,\r\n    value: valueProp,\r\n    accordion = false,\r\n    onChange: onChangeProp,\r\n    children: childrenProp,\r\n    ...restProps\r\n  } = props\r\n\r\n  const { value, setValue } = useValue({ value: valueProp, defaultValue, onChange: onChangeProp })\r\n\r\n  const { items } = useCollapseChildren(childrenProp)\r\n\r\n  const toggleItem = useCallback(\r\n    (itemValue: number | string, expanded: boolean) => {\r\n      if (accordion) {\r\n        setValue(itemValue === value ? \"\" : itemValue)\r\n      } else if (expanded) {\r\n        setValue((value as any[]).concat(itemValue))\r\n      } else {\r\n        setValue((value as any[]).filter((activeKey) => activeKey !== itemValue))\r\n      }\r\n    },\r\n    [accordion, setValue, value],\r\n  )\r\n\r\n  const isExpanded = useCallback(\r\n    (itemValue: number | string) => {\r\n      if (process.env.NODE_ENV !== \"production\" && !validateActiveValue(value, accordion)) {\r\n        return false\r\n      }\r\n      return accordion ? value === itemValue : (value as Array<number | string>).includes(itemValue)\r\n    },\r\n    [accordion, value],\r\n  )\r\n\r\n  return (\r\n    <CollapseContext.Provider\r\n      value={{\r\n        isExpanded,\r\n        toggleItem,\r\n      }}\r\n    >\r\n      <View\r\n        className={classNames(\r\n          prefixClassname(\"collapse\"),\r\n          {\r\n            [HAIRLINE_BORDER_TOP_BOTTOM]: bordered,\r\n          },\r\n          className,\r\n        )}\r\n        children={items}\r\n        {...restProps}\r\n      />\r\n    </CollapseContext.Provider>\r\n  )\r\n}\r\n\r\nexport default Collapse\r\n","import CollapseElement, { CollapseProps } from \"./collapse\"\nimport CollapseItem from \"./collapse-item\"\n\ninterface CollapseInterface {\n  (props: CollapseProps): JSX.Element\n\n  Item: typeof CollapseItem\n}\n\nconst Collapse = CollapseElement as CollapseInterface\nCollapse.Item = CollapseItem\n\nexport default Collapse\n","import { Collapse } from \"@taroify/core\"\r\nimport { QuestionOutlined, ShopOutlined } from \"@taroify/icons\"\r\nimport * as React from \"react\"\r\nimport { useState } from \"react\"\r\nimport Block from \"../../../components/block\"\r\nimport Page from \"../../../components/page\"\r\nimport \"./index.scss\"\r\n\r\nfunction BasicCollapse() {\r\n  const [value, setValue] = useState([0])\r\n  return (\r\n    <Collapse value={value} onChange={setValue}>\r\n      <Collapse.Item title=\"标题1\">代码是写出来给人看的，附带能在机器上运行</Collapse.Item>\r\n      <Collapse.Item title=\"标题2\">代码是写出来给人看的，附带能在机器上运行</Collapse.Item>\r\n      <Collapse.Item title=\"标题3\">代码是写出来给人看的，附带能在机器上运行</Collapse.Item>\r\n    </Collapse>\r\n  )\r\n}\r\n\r\nfunction AccordionCollapse() {\r\n  return (\r\n    <Collapse accordion defaultValue={0}>\r\n      <Collapse.Item title=\"标题1\">代码是写出来给人看的，附带能在机器上运行</Collapse.Item>\r\n      <Collapse.Item title=\"标题2\">代码是写出来给人看的，附带能在机器上运行</Collapse.Item>\r\n      <Collapse.Item title=\"标题3\">代码是写出来给人看的，附带能在机器上运行</Collapse.Item>\r\n    </Collapse>\r\n  )\r\n}\r\n\r\nfunction CollapseWithDisabledWithReadonly() {\r\n  return (\r\n    <Collapse defaultValue={[0]}>\r\n      <Collapse.Item title=\"正常状态\">代码是写出来给人看的，附带能在机器上运行</Collapse.Item>\r\n      <Collapse.Item title=\"只读状态\" clickable={false}>\r\n        代码是写出来给人看的，附带能在机器上运行\r\n      </Collapse.Item>\r\n      <Collapse.Item title=\"禁用状态\" disabled>\r\n        代码是写出来给人看的，附带能在机器上运行\r\n      </Collapse.Item>\r\n    </Collapse>\r\n  )\r\n}\r\n\r\nfunction CustomCollapse() {\r\n  return (\r\n    <Collapse defaultValue={[0]}>\r\n      <Collapse.Item\r\n        className=\"custom-collapse-item1\"\r\n        title={\r\n          <>\r\n            标题1\r\n            <QuestionOutlined />\r\n          </>\r\n        }\r\n      >\r\n        代码是写出来给人看的，附带能在机器上运行\r\n      </Collapse.Item>\r\n      <Collapse.Item icon={<ShopOutlined />} title=\"标题2\" extra=\"内容\" clickable={false}>\r\n        代码是写出来给人看的，附带能在机器上运行\r\n      </Collapse.Item>\r\n    </Collapse>\r\n  )\r\n}\r\n\r\nexport default function CollapseDemo() {\r\n  return (\r\n    <Page title=\"Collapse 折叠面板\" className=\"collapse-demo\">\r\n      <Block title=\"基础用法\">\r\n        <BasicCollapse />\r\n      </Block>\r\n      <Block title=\"手风琴\">\r\n        <AccordionCollapse />\r\n      </Block>\r\n      <Block title=\"只读状态和禁用状态\">\r\n        <CollapseWithDisabledWithReadonly />\r\n      </Block>\r\n      <Block title=\"自定义标题内容\">\r\n        <CustomCollapse />\r\n      </Block>\r\n    </Page>\r\n  )\r\n}\r\n"],"sourceRoot":""}