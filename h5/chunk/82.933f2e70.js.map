{"version":3,"sources":["webpack:///../../../../packages/core/src/utils/format/unit.ts","webpack:///../../../../packages/core/src/utils/state.ts","webpack:///../../../../packages/core/src/utils/base.ts","webpack:///../../../../packages/core/src/hooks/use-mounted.ts","webpack:///../../../../packages/core/src/hooks/use-rendered-effect.tsx","webpack:///../../../../packages/core/src/hooks/use-placeholder.tsx","webpack:///../../../../packages/core/src/hooks/use-height.ts","webpack:///../../../../packages/core/src/hooks/use-timeout.ts","webpack:///../../../../packages/core/src/hooks/use-unique-id.ts","webpack:///../../../../packages/core/src/hooks/use-update.ts","webpack:///../../../../packages/core/src/hooks/use-window-resize.tsx","webpack:///../../../../packages/core/src/utils/dom/rect.ts","webpack:///../../../../packages/icons/src/utils/index.ts","webpack:///../../../../packages/core/src/utils/dom/element.ts","webpack:///./src/components/block.tsx","webpack:///../../../../packages/core/src/cell/cell-group.context.ts","webpack:///../../../../packages/core/src/cell/cell-base.tsx","webpack:///../../../../packages/core/src/cell/cell-brief.tsx","webpack:///../../../../packages/core/src/cell/cell-title.tsx","webpack:///../../../../packages/core/src/cell/cell-value.tsx","webpack:///../../../../packages/core/src/cell/cell.tsx","webpack:///../../../../packages/core/src/cell/cell-group.tsx","webpack:///../../../../packages/core/src/cell/index.ts","webpack:///../../../../packages/core/src/cell/style/index.ts","webpack:///../../../../packages/core/src/styles/hairline.ts","webpack:///../../../../packages/core/src/utils/raf.ts","webpack:///../../../../packages/core/src/collapse/collapse.context.ts","webpack:///../../../../packages/core/src/collapse/collapse-item.tsx","webpack:///../../../../packages/core/src/collapse/collapse.tsx","webpack:///../../../../packages/core/src/collapse/index.ts","webpack:///./src/pages/display/collapse/index.tsx"],"names":["value","unitToPx","size","addUnitPx","width","height","convertRem","getRootFontSize","doc","document","fontSize","window","rootFontSize","parseFloat","convertPx","convertVw","convertVh","previousRef","useRef","useEffect","usePreviousRef","cb","stateRef","refs","setIndexRefs","useCallback","index","el","createRef","update","useUpdate","currentRef","setObject","newState","getObject","useMemo","object","options","onChange","valueRef","useToRef","defaultValue","setValue","emitChange","getValue","inBrowser","inWechat","process","useRenderedEffect","effect","destructorRef","nextTick","destructor","className","useState","useMounted","useHeight","children","style","useTimeout","timerRef","cbRef","msRef","argsRef","stop","clearTimeout","start","args","setTimeout","callback","ms","restart","useUniqueId","prefix","uniqueIdRef","updateReducer","num","useReducer","useWindowResize","onWindowResize","offWindowResize","top","left","right","bottom","element","elementUnref","isWindow","Promise","makeRect","resolve","queryNodesRef","isRootElement","rects","oneElement","queryAllNodesRef","isValidElement","isIconElement","cloneElement","node","oldProps","props","newProps","classNames","val","elementOrRef","ancestorCustomWrapper","ancestor","createSelectorQuery","Block","variant","title","demoPrefixClassname","createContext","CellBase","clickable","clickableProp","required","bordered","useContext","prefixClassname","align","icon","cloneIconElement","rightIcon","CellBrief","CellTitle","CellValue","alone","inset","CellGroupContext","Cell","Object","brief","HAIRLINE_BORDER","HAIRLINE_BORDER_TOP","HAIRLINE_BORDER_LEFT","HAIRLINE_BORDER_BOTTOM","HAIRLINE_BORDER_SURROUND","HAIRLINE_BORDER_TOP_BOTTOM","HAIRLINE_BORDER_UNSET_TOP_BOTTOM","requestAnimationFrame","rafIds","raf","CollapseItem","disabled","expandIcon","React","contentRef","toggleItem","expanded","isExpanded","onTransitionEnd","setExpandHeight","setVisibility","a","getRect","heightPx","doubleRaf","toggle","newExpanded","onTitleClick","wrapperStyle","display","visibility","expandHeight","onClick","ref","Collapse","accordion","childrenProp","useValue","onChangeProp","items","useCollapseChildren","__children__","Children","child","key","itemValue","activeKey","CollapseContext","BasicCollapse","Item","AccordionCollapse","CollapseWithDisabledWithReadonly","CustomCollapse","extra","CollapseDemo"],"mappings":"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","file":"chunk/82.933f2e70.js","sourcesContent":["import * as _ from \"lodash\"\r\nimport { CSSProperties } from \"react\"\r\n\r\nexport function addUnitPx(value?: string | number): string {\r\n  return value === undefined ? \"\" : `${unitToPx(value)}px`\r\n}\r\n\r\nexport function getSizeStyle(originSize?: string | number): CSSProperties | undefined {\r\n  if (_.isNumber(originSize) || _.isString(originSize)) {\r\n    const size = addUnitPx(originSize)\r\n    return {\r\n      width: size,\r\n      height: size,\r\n    }\r\n  }\r\n  return {}\r\n}\r\n\r\nexport function getZIndexStyle(zIndex?: string | number) {\r\n  const style: CSSProperties = {}\r\n  if (zIndex !== undefined) {\r\n    style.zIndex = +zIndex\r\n  }\r\n  return style\r\n}\r\n\r\n// cache\r\nlet rootFontSize: number\r\n\r\nfunction getRootFontSize() {\r\n  if (!rootFontSize) {\r\n    const doc = document.documentElement\r\n    const fontSize = doc.style.fontSize || window.getComputedStyle(doc).fontSize\r\n\r\n    rootFontSize = parseFloat(fontSize)\r\n  }\r\n\r\n  return rootFontSize\r\n}\r\n\r\nfunction convertPx(value: string) {\r\n  value = value.replace(/px/g, \"\")\r\n  return +value\r\n}\r\n\r\nfunction convertRem(value: string) {\r\n  value = value.replace(/rem/g, \"\")\r\n  return +value * getRootFontSize()\r\n}\r\n\r\nfunction convertVw(value: string) {\r\n  value = value.replace(/vw/g, \"\")\r\n  return (+value * window.innerWidth) / 100\r\n}\r\n\r\nfunction convertVh(value: string) {\r\n  value = value.replace(/vh/g, \"\")\r\n  return (+value * window.innerHeight) / 100\r\n}\r\n\r\nexport function unitToPx(value: string | number): number {\r\n  if (typeof value === \"number\") {\r\n    return value\r\n  }\r\n\r\n  if (value.includes(\"px\")) {\r\n    return convertPx(value)\r\n  }\r\n  if (value.includes(\"rem\")) {\r\n    return convertRem(value)\r\n  }\r\n  if (value.includes(\"vw\")) {\r\n    return convertVw(value)\r\n  }\r\n  if (value.includes(\"vh\")) {\r\n    return convertVh(value)\r\n  }\r\n\r\n  return parseFloat(value)\r\n}\r\n","import * as _ from \"lodash\"\r\nimport { createRef, MutableRefObject, useCallback, useEffect, useMemo, useRef } from \"react\"\r\nimport { useUpdate } from \"../hooks\"\r\n\r\nexport function usePreviousRef<T = any>(value: T): MutableRefObject<T> {\r\n  const previousRef = useRef<T>(value)\r\n  useEffect(() => {\r\n    previousRef.current = value\r\n  })\r\n  return previousRef\r\n}\r\n\r\nexport function usePrevious<T>(state: T): T | undefined {\r\n  return usePreviousRef(state).current\r\n}\r\n\r\ntype UseRenderedCallback<T> = () => T\r\n\r\nexport function useRendered<T = any>(cb: UseRenderedCallback<T>): T {\r\n  return cb?.()\r\n}\r\n\r\nexport function useRenderedRef<T = any>(cb: UseRenderedCallback<T>): MutableRefObject<T> {\r\n  const stateRef = useRef<T>()\r\n  if (cb) {\r\n    stateRef.current = cb()\r\n  }\r\n  return stateRef as MutableRefObject<T>\r\n}\r\n\r\nexport function useToRef<T = any>(value: T): MutableRefObject<T> {\r\n  const stateRef = useRef<T>()\r\n  stateRef.current = value\r\n  return stateRef as MutableRefObject<T>\r\n}\r\n\r\nexport function useRefs<T = Element>() {\r\n  const refs = useRef<MutableRefObject<T>[]>([])\r\n\r\n  const setIndexRefs = useCallback(\r\n    (index: number) => (el: unknown) => {\r\n      if (!refs.current[index]) {\r\n        refs.current[index] = createRef() as MutableRefObject<T>\r\n      }\r\n      refs.current[index].current = el as T\r\n    },\r\n    [],\r\n  )\r\n\r\n  return [refs.current, setIndexRefs] as const\r\n}\r\n\r\nexport function useObject<S>(state: S) {\r\n  const update = useUpdate()\r\n\r\n  const stateRef = useRef(state)\r\n\r\n  const currentRef = useRef<S>()\r\n  const previousRef = useRef<S>()\r\n\r\n  if (!_.isEqual(currentRef.current, state)) {\r\n    previousRef.current = currentRef.current\r\n    currentRef.current = state\r\n    stateRef.current = state\r\n  }\r\n\r\n  const setObject = useCallback(\r\n    (newState: S) => {\r\n      stateRef.current = { ...stateRef.current, ...newState }\r\n      update()\r\n    },\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    [],\r\n  )\r\n\r\n  const getObject = useCallback(() => stateRef.current as S, [])\r\n\r\n  return useMemo(\r\n    () => ({ object: stateRef.current, getObject, setObject }),\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    [stateRef.current, getObject, setObject],\r\n  )\r\n}\r\n\r\ninterface UseValueOptions<S> {\r\n  defaultValue?: S\r\n  initialValue?: S\r\n  value?: S\r\n\r\n  onChange?: (...args: any[]) => void\r\n}\r\n\r\ninterface UseValueReturn<S> {\r\n  value: S | undefined\r\n  getValue: () => S\r\n  setValue: (newValue: S, emitChange?: (aValue: S) => void) => void\r\n}\r\n\r\nexport function useValue<S>(options: UseValueOptions<S> = {}): UseValueReturn<S> {\r\n  const { defaultValue, value: valueProp, initialValue, onChange } = options\r\n  const update = useUpdate()\r\n  //\r\n  const valueRef = useToRef(valueProp)\r\n  const stateRef = useRef(defaultValue ?? valueRef.current ?? initialValue)\r\n\r\n  if (valueRef.current !== undefined) {\r\n    stateRef.current = valueRef.current\r\n  }\r\n\r\n  const setValue = useCallback(\r\n    (newValue: S, emitChange?: (aValue: S) => void) => {\r\n      if (_.isUndefined(valueRef.current)) {\r\n        stateRef.current = newValue\r\n        update()\r\n      }\r\n      ;(emitChange ?? onChange)?.(newValue)\r\n    },\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    [onChange],\r\n  )\r\n\r\n  const getValue = useCallback(() => stateRef.current as S, [])\r\n\r\n  return useMemo(\r\n    () => ({\r\n      value: stateRef.current,\r\n      getValue,\r\n      setValue,\r\n    }),\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    [stateRef.current, getValue, setValue],\r\n  )\r\n}\r\n","export function noop() {}\r\n\r\nexport const inBrowser = typeof document !== \"undefined\" && !!document.scripts\r\nexport const inWechat = process.env.TARO_ENV === \"weapp\"\r\nexport const inSwan = process.env.TARO_ENV === \"swan\"\r\nexport const inAlipay = process.env.TARO_ENV === \"alipay\"\r\nexport const inQQ = process.env.TARO_ENV === \"qq\"\r\nexport const inToutiao = process.env.TARO_ENV === \"tt\"\r\n","import useRenderedEffect from \"./use-rendered-effect\"\r\n\r\nexport default function useMounted(cb: (...args: any[]) => any) {\r\n  useRenderedEffect(cb, [])\r\n}\r\n","import { nextTick } from \"@tarojs/taro\"\r\nimport * as _ from \"lodash\"\r\nimport { DependencyList, EffectCallback, useEffect, useRef } from \"react\"\r\n\r\nfunction useRenderedEffect(effect: EffectCallback, deps?: DependencyList) {\r\n  const destructorRef = useRef<() => void>()\r\n\r\n  useEffect(\r\n    () => {\r\n      nextTick(() => {\r\n        const destructor = effect?.()\r\n        if (_.isFunction(destructor)) {\r\n          destructorRef.current = destructor\r\n        }\r\n      })\r\n\r\n      return destructorRef.current\r\n    },\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    deps,\r\n  )\r\n}\r\n\r\nexport default useRenderedEffect\r\n","import { View } from \"@tarojs/components\"\r\nimport * as React from \"react\"\r\nimport { addUnitPx } from \"../utils/format/unit\"\r\nimport useHeight from \"./use-height\"\r\n\r\ninterface UsePlaceholderOptions {\r\n  className?: string\r\n}\r\n\r\nexport default function usePlaceholder(contentRef: any, { className }: UsePlaceholderOptions) {\r\n  const height = useHeight(contentRef)\r\n\r\n  return ({\r\n    // @ts-ignore\r\n    children,\r\n  }) => (\r\n    <View\r\n      className={className}\r\n      style={{ height: height ? `${addUnitPx(height)}` : \"\" }}\r\n      children={children}\r\n    />\r\n  )\r\n}\r\n","import { useState } from \"react\"\r\nimport { getRect } from \"../utils/dom/rect\"\r\nimport useMounted from \"./use-mounted\"\r\n\r\nexport default function useHeight(elementOrRef: any) {\r\n  const [height, setHeight] = useState<number>(0)\r\n  useMounted(() =>\r\n    getRect(elementOrRef)\r\n      .then(({ height }) => height)\r\n      .then(setHeight),\r\n  )\r\n  return height\r\n}\r\n","import { useCallback, useMemo, useRef } from \"react\"\r\n\r\ntype UseTimeoutCallback = (...args: any[]) => void\r\n\r\nfunction useTimeout() {\r\n  const timerRef = useRef<NodeJS.Timeout>()\r\n\r\n  const cbRef = useRef<UseTimeoutCallback>()\r\n  const msRef = useRef<number>()\r\n  const argsRef = useRef<any[]>()\r\n\r\n  const stop = useCallback(() => {\r\n    if (timerRef.current) {\r\n      clearTimeout(timerRef.current)\r\n      timerRef.current = undefined\r\n    }\r\n  }, [])\r\n\r\n  const start = useCallback((callback: UseTimeoutCallback, ms?: number, ...args: any[]) => {\r\n    if (timerRef.current) {\r\n      return\r\n    }\r\n    cbRef.current = callback\r\n    msRef.current = ms\r\n    argsRef.current = args\r\n    timerRef.current = setTimeout(callback, ms, args)\r\n  }, [])\r\n\r\n  const restart = useCallback(\r\n    (callback?: UseTimeoutCallback, ms?: number, ...args: any[]) => {\r\n      stop()\r\n      if (callback) {\r\n        start(callback, ms, args)\r\n      } else if (cbRef.current) {\r\n        start(cbRef.current, msRef.current, argsRef.current)\r\n      }\r\n    },\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    [],\r\n  )\r\n\r\n  return useMemo(\r\n    () => ({\r\n      restart,\r\n      start,\r\n      stop,\r\n    }),\r\n    [restart, start, stop],\r\n  )\r\n}\r\n\r\nexport default useTimeout\r\n","import * as _ from \"lodash\"\r\nimport { useRef } from \"react\"\r\n\r\nfunction useUniqueId(prefix: string = \"t_\") {\r\n  const uniqueIdRef = useRef(_.uniqueId(prefix))\r\n  return uniqueIdRef.current\r\n}\r\n\r\nexport default useUniqueId\r\n","import { useReducer } from \"react\"\r\n\r\nconst updateReducer = (num: number): number => (num + 1) % 1_000_000\r\n\r\nfunction useUpdate(): () => void {\r\n  const [, update] = useReducer(updateReducer, 0)\r\n\r\n  return update\r\n}\r\n\r\nexport default useUpdate\r\n","import { offWindowResize, onWindowResize } from \"@tarojs/taro\"\r\nimport { useEffect } from \"react\"\r\n\r\ninterface Size {\r\n  /** 变化后的窗口高度，单位 px */\r\n  windowHeight: number\r\n  /** 变化后的窗口宽度，单位 px */\r\n  windowWidth: number\r\n}\r\n\r\ninterface CallbackResult {\r\n  size: Size\r\n}\r\n\r\ntype WindowResizeCallback = (result: CallbackResult) => void\r\n\r\nfunction useWindowResize(callback: WindowResizeCallback) {\r\n  useEffect(() => {\r\n    onWindowResize?.(callback)\r\n\r\n    return () =>\r\n      offWindowResize?.(\r\n        // @ts-ignore\r\n        callback,\r\n      )\r\n  }, [callback])\r\n}\r\n\r\nexport default useWindowResize\r\n","import { inBrowser } from \"../base\"\r\nimport { queryNodesRef, elementUnref, isRootElement, isWindow, queryAllNodesRef } from \"./element\"\r\n\r\nexport interface Rect {\r\n  dataset: Record<string, any>\r\n  id: string\r\n  top: number\r\n  right: number\r\n  bottom: number\r\n  left: number\r\n  width: number\r\n  height: number\r\n}\r\n\r\nexport function makeRect(width: number, height: number) {\r\n  return {\r\n    top: 0,\r\n    left: 0,\r\n    right: width,\r\n    bottom: height,\r\n    width,\r\n    height,\r\n  } as Rect\r\n}\r\n\r\nexport function getRect(elementOrRef: any): Promise<Rect> {\r\n  const element = elementUnref(elementOrRef)\r\n  if (element) {\r\n    if (inBrowser) {\r\n      if (isWindow(element)) {\r\n        const width = element.innerWidth\r\n        const height = element.innerHeight\r\n        return Promise.resolve(makeRect(width, height))\r\n      }\r\n\r\n      return Promise.resolve(\r\n        (((element as unknown) as HTMLElement).getBoundingClientRect() as unknown) as Rect,\r\n      )\r\n    } else {\r\n      return new Promise<Rect>((resolve) => {\r\n        queryNodesRef(element)\r\n          .boundingClientRect()\r\n          .exec(([rect]) => {\r\n            if (isRootElement(element)) {\r\n              const { width, height } = rect\r\n              resolve(makeRect(width, height))\r\n            } else {\r\n              resolve(rect)\r\n            }\r\n          })\r\n      })\r\n    }\r\n  }\r\n  return Promise.resolve(makeRect(0, 0))\r\n}\r\n\r\nexport function getRects(elementOrRef: any, selector: string): Promise<Rect[]> {\r\n  const element = elementUnref(elementOrRef)\r\n  if (element) {\r\n    if (inBrowser) {\r\n      const rects: Rect[] = []\r\n      ;((element as unknown) as HTMLElement)\r\n        .querySelectorAll(selector)\r\n        .forEach((oneElement) =>\r\n          rects.push((oneElement.getBoundingClientRect() as unknown) as Rect),\r\n        )\r\n      return Promise.resolve(rects)\r\n    } else {\r\n      return new Promise<Rect[]>((resolve) => {\r\n        queryAllNodesRef(element, selector)\r\n          .boundingClientRect()\r\n          .exec(([rects]) => resolve((rects as unknown) as Rect[]))\r\n      })\r\n    }\r\n  }\r\n  return Promise.resolve([])\r\n}\r\n","import classNames from \"classnames\"\nimport * as _ from \"lodash\"\nimport { cloneElement, isValidElement, ReactElement, ReactNode } from \"react\"\nimport { ICON_TYPE, IconProps } from \"../shared\"\n\nexport function isIconElement(node?: ReactNode): boolean {\n  // Is`t not ReactElement\n  if (!isValidElement(node)) {\n    return false\n  }\n  const element = node as ReactElement\n  return _.hasIn(element.type, ICON_TYPE)\n}\n\nexport function cloneIconElement(node: ReactNode, props: IconProps): ReactNode {\n  if (!isIconElement(node)) {\n    return isValidElement(node) ? cloneElement(node, props) : node\n  }\n  const { className, ...restProps } = props\n  const element = node as ReactElement\n  const { props: oldProps } = element\n  const newProps: IconProps = {\n    ...oldProps,\n    className: classNames(oldProps.className, className),\n    ...restProps,\n  }\n  return cloneElement(element, newProps)\n}\n","import { TaroElement } from \"@tarojs/runtime\"\r\nimport { createSelectorQuery } from \"@tarojs/taro\"\r\nimport * as _ from \"lodash\"\r\nimport { inWechat } from \"../base\"\r\n\r\nexport const ELEMENT_NODE_TYPE = 1\r\n\r\nexport function isWindow(val: unknown): val is Window {\r\n  return val === window\r\n}\r\n\r\nexport function isBodyElement(val: unknown): boolean {\r\n  return val === document.body\r\n}\r\n\r\nexport function elementUnref(elementOrRef: any): TaroElement {\r\n  if (elementOrRef === undefined || elementOrRef === null) {\r\n    return elementOrRef\r\n  }\r\n  if (\"current\" in elementOrRef) {\r\n    return elementOrRef.current\r\n  }\r\n  return elementOrRef\r\n}\r\n\r\nexport function isRootElement(node?: TaroElement) {\r\n  return node?.nodeType === ELEMENT_NODE_TYPE && node?.tagName === \"ROOT\"\r\n}\r\n\r\nexport function matchSelector(aSelector?: string, bSelector?: string) {\r\n  return _.replace(aSelector as string, \"#\", \"\") === bSelector\r\n}\r\n\r\n// Fix nested in CustomWrapper is undefined\r\n// See: https://github.com/mallfoundry/taroify/pull/143\r\nfunction ancestorCustomWrapper(element: TaroElement) {\r\n  if (inWechat) {\r\n    let ancestor = element\r\n    while (ancestor.parentNode && !isRootElement(ancestor.parentNode as TaroElement)) {\r\n      ancestor = ancestor.parentNode as TaroElement\r\n    }\r\n\r\n    if (ancestor && ancestor !== element) {\r\n      return ancestor\r\n    }\r\n  }\r\n}\r\n\r\nexport function queryNodesRef(element: TaroElement) {\r\n  if (isRootElement(element)) {\r\n    return createSelectorQuery().selectViewport()\r\n  }\r\n\r\n  const ancestor = ancestorCustomWrapper(element)\r\n  if (ancestor) {\r\n    return createSelectorQuery().select(`#${ancestor.uid}>>>#${element.uid}`)\r\n  }\r\n\r\n  return createSelectorQuery().select(\"#\" + element.uid)\r\n}\r\n\r\nexport function queryAllNodesRef(element: TaroElement, selector?: string) {\r\n  if (isRootElement(element)) {\r\n    return createSelectorQuery().selectViewport()\r\n  }\r\n\r\n  const ancestor = ancestorCustomWrapper(element)\r\n  if (ancestor) {\r\n    return createSelectorQuery().selectAll(`#${ancestor.uid}>>>#${element.uid}${selector}`)\r\n  }\r\n\r\n  return createSelectorQuery().selectAll(\"#\" + element.uid + selector)\r\n}\r\n","import { View } from \"@tarojs/components\"\r\nimport classNames from \"classnames\"\r\nimport * as React from \"react\"\r\nimport { ReactNode } from \"react\"\r\nimport { demoPrefixClassname } from \"../styles/prefix\"\r\nimport \"./block.scss\"\r\n\r\ntype BlockVariant = \"card\"\r\n\r\ninterface BlockProps {\r\n  className?: string\r\n  variant?: BlockVariant\r\n  title?: ReactNode\r\n  children?: ReactNode\r\n}\r\n\r\nexport default function Block(props: BlockProps) {\r\n  const { className, variant, title, children } = props\r\n  return (\r\n    <View className={classNames(demoPrefixClassname(\"block\"), className)}>\r\n      {title && <View className={demoPrefixClassname(\"block__title\")} children={title} />}\r\n      <View\r\n        className={classNames({\r\n          [demoPrefixClassname(\"block__content\")]: variant !== \"card\",\r\n          [demoPrefixClassname(\"block__card\")]: variant === \"card\",\r\n        })}\r\n      >\r\n        {children}\r\n      </View>\r\n    </View>\r\n  )\r\n}\r\n","import { createContext } from \"react\"\r\n\r\ninterface CellGroupContextValue {\r\n  clickable?: boolean\r\n}\r\n\r\nconst CellGroupContext = createContext<CellGroupContextValue>({})\r\n\r\nexport default CellGroupContext\r\n","import { cloneIconElement, isIconElement } from \"@taroify/icons/utils\"\r\nimport { View } from \"@tarojs/components\"\r\nimport { ViewProps } from \"@tarojs/components/types/View\"\r\nimport classNames from \"classnames\"\r\nimport * as React from \"react\"\r\nimport { ReactNode, useContext } from \"react\"\r\nimport { prefixClassname } from \"../styles\"\r\nimport CellGroupContext from \"./cell-group.context\"\r\nimport { CellAlign, CellSize } from \"./cell.shared\"\r\n\r\nexport interface CellBaseProps extends ViewProps {\r\n  bordered?: boolean\r\n  required?: boolean\r\n  clickable?: boolean\r\n  size?: CellSize\r\n  align?: CellAlign\r\n  icon?: ReactNode\r\n  rightIcon?: ReactNode\r\n  children?: ReactNode\r\n}\r\n\r\nfunction CellBase(props: CellBaseProps) {\r\n  const {\r\n    className,\r\n    size = \"medium\",\r\n    align,\r\n    clickable: clickableProp = false,\r\n    required = false,\r\n    bordered = true,\r\n    icon,\r\n    rightIcon,\r\n    children,\r\n    ...restProps\r\n  } = props\r\n\r\n  const { clickable } = useContext(CellGroupContext)\r\n\r\n  return (\r\n    <View\r\n      className={classNames(\r\n        prefixClassname(\"cell\"),\r\n        {\r\n          [prefixClassname(\"cell--start\")]: align === \"start\",\r\n          [prefixClassname(\"cell--center\")]: align === \"center\",\r\n          [prefixClassname(\"cell--end\")]: align === \"end\",\r\n          [prefixClassname(\"cell--large\")]: size === \"large\",\r\n          [prefixClassname(\"cell--clickable\")]: clickableProp || clickable,\r\n          [prefixClassname(\"cell--required\")]: required,\r\n          [prefixClassname(\"cell--borderless\")]: !bordered,\r\n        },\r\n        className,\r\n      )}\r\n      {...restProps}\r\n    >\r\n      {icon && isIconElement(icon)\r\n        ? cloneIconElement(icon, { className: prefixClassname(\"cell__icon\") })\r\n        : icon}\r\n      {children}\r\n      {rightIcon && isIconElement(rightIcon)\r\n        ? cloneIconElement(rightIcon, { className: prefixClassname(\"cell__right-icon\") })\r\n        : rightIcon}\r\n    </View>\r\n  )\r\n}\r\n\r\nexport default CellBase\r\n","import { View } from \"@tarojs/components\"\r\nimport { ViewProps } from \"@tarojs/components/types/View\"\r\nimport classNames from \"classnames\"\r\nimport * as React from \"react\"\r\nimport { ReactNode } from \"react\"\r\nimport { prefixClassname } from \"../styles\"\r\n\r\ninterface CellBriefProps extends ViewProps {\r\n  children: ReactNode\r\n}\r\n\r\nfunction CellBrief(props: CellBriefProps) {\r\n  const { className, ...restProps } = props\r\n  return <View className={classNames(prefixClassname(\"cell__brief\"), className)} {...restProps} />\r\n}\r\n\r\nexport default CellBrief\r\n","import { View } from \"@tarojs/components\"\r\nimport { ViewProps } from \"@tarojs/components/types/View\"\r\nimport classNames from \"classnames\"\r\nimport * as React from \"react\"\r\nimport { ReactNode } from \"react\"\r\nimport { prefixClassname } from \"../styles\"\r\n\r\ninterface CellTitleProps extends ViewProps {\r\n  children?: ReactNode\r\n}\r\n\r\nfunction CellTitle(props: CellTitleProps) {\r\n  const { className, ...restProps } = props\r\n  return <View className={classNames(prefixClassname(\"cell__title\"), className)} {...restProps} />\r\n}\r\n\r\nexport default CellTitle\r\n","import { View } from \"@tarojs/components\"\r\nimport { ViewProps } from \"@tarojs/components/types/View\"\r\nimport classNames from \"classnames\"\r\nimport * as React from \"react\"\r\nimport { ReactNode } from \"react\"\r\nimport { prefixClassname } from \"../styles\"\r\n\r\ninterface CellValueProps extends ViewProps {\r\n  alone?: boolean\r\n  children: ReactNode\r\n}\r\n\r\nfunction CellValue(props: CellValueProps) {\r\n  const { className, alone, ...restProps } = props\r\n  return (\r\n    <View\r\n      className={classNames(\r\n        prefixClassname(\"cell__value\"),\r\n        {\r\n          [prefixClassname(\"cell__value--alone\")]: alone,\r\n        },\r\n        className,\r\n      )}\r\n      {...restProps}\r\n    />\r\n  )\r\n}\r\n\r\nexport default CellValue\r\n","import { ViewProps } from \"@tarojs/components/types/View\"\r\nimport * as React from \"react\"\r\nimport { ReactNode } from \"react\"\r\nimport CellBase from \"./cell-base\"\r\nimport CellBrief from \"./cell-brief\"\r\nimport CellTitle from \"./cell-title\"\r\nimport CellValue from \"./cell-value\"\r\nimport { CellAlign, CellSize } from \"./cell.shared\"\r\n\r\nexport interface CellProps extends ViewProps {\r\n  size?: CellSize\r\n  align?: CellAlign\r\n  title?: ReactNode\r\n  brief?: ReactNode\r\n  icon?: ReactNode\r\n  rightIcon?: ReactNode\r\n  bordered?: boolean\r\n  clickable?: boolean\r\n  children?: ReactNode\r\n}\r\n\r\nfunction Cell(props: CellProps) {\r\n  const { title, brief, children, ...restProps } = props\r\n  return (\r\n    <CellBase {...restProps}>\r\n      {title && (\r\n        <CellTitle>\r\n          {title}\r\n          {brief && <CellBrief children={brief} />}\r\n        </CellTitle>\r\n      )}\r\n      <CellValue alone={!title} children={children} />\r\n    </CellBase>\r\n  )\r\n}\r\n\r\nexport default Cell\r\n","import { View } from \"@tarojs/components\"\r\nimport { ViewProps } from \"@tarojs/components/types/View\"\r\nimport classNames from \"classnames\"\r\nimport * as React from \"react\"\r\nimport { ReactNode } from \"react\"\r\nimport { prefixClassname } from \"../styles\"\r\nimport CellGroupContext from \"./cell-group.context\"\r\n\r\ninterface CellGroupProps extends ViewProps {\r\n  title?: ReactNode\r\n  clickable?: boolean\r\n  inset?: boolean\r\n  bordered?: boolean\r\n  children?: ReactNode\r\n}\r\n\r\nexport function CellGroup(props: CellGroupProps) {\r\n  const { title, clickable = false, inset = false, bordered = true, children, ...restProps } = props\r\n  return (\r\n    <CellGroupContext.Provider\r\n      value={{\r\n        clickable,\r\n      }}\r\n    >\r\n      <View\r\n        className={classNames(prefixClassname(\"cell-group\"), {\r\n          [prefixClassname(\"cell-group--inset\")]: inset,\r\n        })}\r\n        {...restProps}\r\n      >\r\n        {title && (\r\n          <View\r\n            className={classNames(prefixClassname(\"cell-group__title\"), {\r\n              [prefixClassname(\"cell-group__title--inset\")]: inset,\r\n            })}\r\n            children={title}\r\n          />\r\n        )}\r\n        <View\r\n          className={classNames(prefixClassname(\"cell-group\"), {\r\n            [prefixClassname(\"hairline--top-bottom\")]: bordered,\r\n          })}\r\n          children={children}\r\n        />\r\n      </View>\r\n    </CellGroupContext.Provider>\r\n  )\r\n}\r\n\r\nexport default CellGroup\r\n","import CellElement, { CellProps } from \"./cell\"\r\nimport CellGroup from \"./cell-group\"\r\n\r\nexport type { CellAlign, CellSize } from \"./cell.shared\"\r\nexport { default as CellBase } from \"./cell-base\"\r\nexport { default as CellTitle } from \"./cell-title\"\r\nexport { default as CellValue } from \"./cell-value\"\r\nexport type { CellProps } from \"./cell\"\r\n\r\ninterface CellInterface {\r\n  (props: CellProps): JSX.Element\r\n\r\n  Group: typeof CellGroup\r\n}\r\n\r\nconst Cell = CellElement as CellInterface\r\nCell.Group = CellGroup\r\n\r\nexport default Cell\r\n","import \"../../styles/style\"\r\nimport \"../index.scss\"\r\n","import { prefixClassname } from \"./prefix\"\n\nexport const HAIRLINE_BORDER = prefixClassname(\"hairline\")\nexport const HAIRLINE_BORDER_TOP = `${HAIRLINE_BORDER}--top`\nexport const HAIRLINE_BORDER_LEFT = `${HAIRLINE_BORDER}--left`\nexport const HAIRLINE_BORDER_BOTTOM = `${HAIRLINE_BORDER}--bottom`\nexport const HAIRLINE_BORDER_SURROUND = `${HAIRLINE_BORDER}--surround`\nexport const HAIRLINE_BORDER_TOP_BOTTOM = `${HAIRLINE_BORDER}--top-bottom`\nexport const HAIRLINE_BORDER_UNSET_TOP_BOTTOM = `${HAIRLINE_BORDER}-unset--top-bottom`\n","import * as _ from \"lodash\"\nimport * as requestAnimationFrame from \"raf\"\n\nexport function cancelRaf(rafId: number | number[]) {\n  if (_.isNumber(rafId)) {\n    requestAnimationFrame.cancel(rafId)\n  } else if (_.isArray(rafId)) {\n    _.forEach(rafId, cancelRaf)\n  }\n}\n\nexport function raf(cb: FrameRequestCallback) {\n  // @ts-ignore\n  return requestAnimationFrame.default(cb)\n}\n\nexport default raf\n\nexport function doubleRaf(cb: FrameRequestCallback): [number, number] {\n  const rafIds: [number, number] = [0, 0]\n  rafIds[1] = raf(() => {\n    rafIds[0] = raf(cb)\n  })\n  return rafIds\n}\n","import { createContext } from \"react\"\n\ninterface CollapseContextValue {\n  isExpanded?: (dataKey: number | string) => boolean\n  toggleItem?: (dataKey: number | string, expanded: boolean) => void\n}\n\nconst CollapseContext = createContext<CollapseContextValue>({})\n\nexport default CollapseContext\n","import { ArrowRight } from \"@taroify/icons\"\r\nimport { View } from \"@tarojs/components\"\r\nimport { ViewProps } from \"@tarojs/components/types/View\"\r\nimport { nextTick } from \"@tarojs/taro\"\r\nimport classNames from \"classnames\"\r\nimport * as React from \"react\"\r\nimport {\r\n  CSSProperties,\r\n  ReactNode,\r\n  useCallback,\r\n  useContext,\r\n  useEffect,\r\n  useMemo,\r\n  useRef,\r\n  useState,\r\n} from \"react\"\r\nimport Cell from \"../cell\"\r\nimport { prefixClassname } from \"../styles\"\r\nimport { getRect } from \"../utils/dom/rect\"\r\nimport { addUnitPx } from \"../utils/format/unit\"\r\nimport { doubleRaf, raf } from \"../utils/raf\"\r\nimport CollapseContext from \"./collapse.context\"\r\n\r\ntype CollapseItemSize = \"medium\" | \"large\"\r\n\r\ninterface CollapseItemProps extends ViewProps {\r\n  className?: string\r\n  style?: CSSProperties\r\n  value?: any\r\n  size?: CollapseItemSize\r\n  bordered?: boolean\r\n  clickable?: boolean\r\n  disabled?: boolean\r\n  icon?: ReactNode\r\n  expandIcon?: ReactNode\r\n  title?: ReactNode\r\n  brief?: ReactNode\r\n  extra?: ReactNode\r\n  children?: ReactNode\r\n}\r\n\r\nfunction CollapseItem(props: CollapseItemProps) {\r\n  const {\r\n    className,\r\n    value,\r\n    size = \"medium\",\r\n    bordered = true,\r\n    disabled = false,\r\n    clickable = true,\r\n    icon,\r\n    expandIcon = <ArrowRight />,\r\n    title,\r\n    brief,\r\n    extra,\r\n    children,\r\n    ...restProps\r\n  } = props\r\n\r\n  const contentRef = useRef<HTMLElement>()\r\n  const { isExpanded, toggleItem } = useContext(CollapseContext)\r\n  const expanded = isExpanded?.(value)\r\n\r\n  const [visibility, setVisibility] = useState(expanded)\r\n  const [expandHeight, setExpandHeight] = useState(\"0\")\r\n\r\n  const onTransitionEnd = useCallback(() => {\r\n    if (!expanded) {\r\n      setVisibility(false)\r\n    } else {\r\n      setExpandHeight(\"\")\r\n    }\r\n  }, [expanded])\r\n\r\n  useEffect(() => {\r\n    if (expanded) {\r\n      setVisibility(true)\r\n    }\r\n\r\n    // Use raf: flick when opened in safari\r\n    // Use nextTick: closing animation failed when set `user-select: none`\r\n    const tickRaf = expanded ? nextTick : raf\r\n\r\n    tickRaf(async () => {\r\n      const { height } = await getRect(contentRef)\r\n      if (height) {\r\n        const heightPx = addUnitPx(height)\r\n        setExpandHeight(expanded ? \"0\" : heightPx)\r\n\r\n        // use double raf to ensure animation can start\r\n        doubleRaf(() => {\r\n          setExpandHeight(expanded ? heightPx : \"0\")\r\n        })\r\n      } else {\r\n        onTransitionEnd()\r\n      }\r\n    })\r\n  }, [expanded, onTransitionEnd])\r\n\r\n  const toggle = useCallback(\r\n    (newExpanded = !expanded) => {\r\n      toggleItem?.(value, newExpanded)\r\n    },\r\n    [value, expanded, toggleItem],\r\n  )\r\n\r\n  const onTitleClick = useCallback(() => {\r\n    if (!disabled) {\r\n      toggle()\r\n    }\r\n  }, [disabled, toggle])\r\n\r\n  const wrapperStyle = useMemo(\r\n    () => ({\r\n      display: visibility ? \"\" : \"none\",\r\n      height: expandHeight,\r\n    }),\r\n    [expandHeight, visibility],\r\n  )\r\n\r\n  return (\r\n    <View\r\n      className={classNames(\r\n        prefixClassname(\"collapse-item\"),\r\n        {\r\n          [prefixClassname(\"collapse-item--bordered\")]: value && bordered,\r\n        },\r\n        className,\r\n      )}\r\n      {...restProps}\r\n    >\r\n      <Cell\r\n        className={classNames(prefixClassname(\"collapse-item__title\"), {\r\n          [prefixClassname(\"collapse-item__title--disabled\")]: disabled,\r\n          [prefixClassname(\"collapse-item__title--expanded\")]: expanded,\r\n          [prefixClassname(\"collapse-item__title--borderless\")]: !bordered,\r\n        })}\r\n        size={size}\r\n        icon={icon}\r\n        rightIcon={expandIcon}\r\n        title={title}\r\n        clickable={!disabled && clickable}\r\n        brief={brief}\r\n        children={extra}\r\n        onClick={onTitleClick}\r\n      />\r\n      <View\r\n        className={prefixClassname(\"collapse-item__wrapper\")}\r\n        style={wrapperStyle}\r\n        onTransitionEnd={onTransitionEnd}\r\n      >\r\n        <View\r\n          ref={contentRef}\r\n          className={prefixClassname(\"collapse-item__content\")}\r\n          children={children}\r\n        />\r\n      </View>\r\n    </View>\r\n  )\r\n}\r\n\r\nexport default CollapseItem\r\n","import { View } from \"@tarojs/components\"\r\nimport { ViewProps } from \"@tarojs/components/types/View\"\r\nimport classNames from \"classnames\"\r\nimport * as _ from \"lodash\"\r\nimport * as React from \"react\"\r\nimport { Children, cloneElement, isValidElement, ReactElement, ReactNode, useCallback } from \"react\"\r\nimport { prefixClassname } from \"../styles\"\r\nimport { HAIRLINE_BORDER_TOP_BOTTOM } from \"../styles/hairline\"\r\nimport { useValue } from \"../utils/state\"\r\nimport CollapseItem from \"./collapse-item\"\r\nimport CollapseContext from \"./collapse.context\"\r\n\r\nfunction validateActiveValue(value: string | number | Array<string | number>, accordion: boolean) {\r\n  if (accordion && Array.isArray(value)) {\r\n    // eslint-disable-next-line\r\n    console.error('[Taroify] Collapse: \"value\" should not be Array in accordion mode')\r\n    return false\r\n  }\r\n  if (!accordion && !Array.isArray(value)) {\r\n    // eslint-disable-next-line\r\n    console.error('[Taroify] Collapse: \"value\" should be Array in non-accordion mode')\r\n    return false\r\n  }\r\n  return true\r\n}\r\n\r\ninterface CollapseChildren {\r\n  items: ReactNode[]\r\n}\r\n\r\nfunction useCollapseChildren(children?: ReactNode): CollapseChildren {\r\n  const __children__: CollapseChildren = {\r\n    items: [],\r\n  }\r\n\r\n  Children.forEach(children, (child: ReactNode) => {\r\n    if (isValidElement(child)) {\r\n      const element = child as ReactElement\r\n      const elementType = element.type\r\n      if (elementType === CollapseItem) {\r\n        const { key, props } = element\r\n        const index = _.size(__children__.items)\r\n        const { value } = props\r\n        __children__.items?.push(\r\n          cloneElement(element, {\r\n            key: key ?? index,\r\n            value: value ?? index,\r\n          }),\r\n        )\r\n      } else {\r\n        __children__.items?.push(element)\r\n      }\r\n    } else {\r\n      __children__.items?.push(child)\r\n    }\r\n  })\r\n\r\n  return __children__\r\n}\r\n\r\nexport interface CollapseProps extends ViewProps {\r\n  defaultValue?: any\r\n  value?: any\r\n  accordion?: boolean\r\n  bordered?: boolean\r\n  children?: ReactNode\r\n\r\n  onChange?(value: any): void\r\n}\r\n\r\nfunction Collapse(props: CollapseProps) {\r\n  const {\r\n    className,\r\n    bordered,\r\n    defaultValue,\r\n    value: valueProp,\r\n    accordion = false,\r\n    onChange: onChangeProp,\r\n    children: childrenProp,\r\n    ...restProps\r\n  } = props\r\n\r\n  const { value, setValue } = useValue({ value: valueProp, defaultValue, onChange: onChangeProp })\r\n\r\n  const { items } = useCollapseChildren(childrenProp)\r\n\r\n  const toggleItem = useCallback(\r\n    (itemValue: number | string, expanded: boolean) => {\r\n      if (accordion) {\r\n        setValue(itemValue === value ? \"\" : itemValue)\r\n      } else if (expanded) {\r\n        setValue((value as any[]).concat(itemValue))\r\n      } else {\r\n        setValue((value as any[]).filter((activeKey) => activeKey !== itemValue))\r\n      }\r\n    },\r\n    [accordion, setValue, value],\r\n  )\r\n\r\n  const isExpanded = useCallback(\r\n    (itemValue: number | string) => {\r\n      if (process.env.NODE_ENV !== \"production\" && !validateActiveValue(value, accordion)) {\r\n        return false\r\n      }\r\n      return accordion ? value === itemValue : (value as Array<number | string>).includes(itemValue)\r\n    },\r\n    [accordion, value],\r\n  )\r\n\r\n  return (\r\n    <CollapseContext.Provider\r\n      value={{\r\n        isExpanded,\r\n        toggleItem,\r\n      }}\r\n    >\r\n      <View\r\n        className={classNames(\r\n          prefixClassname(\"collapse\"),\r\n          {\r\n            [HAIRLINE_BORDER_TOP_BOTTOM]: bordered,\r\n          },\r\n          className,\r\n        )}\r\n        children={items}\r\n        {...restProps}\r\n      />\r\n    </CollapseContext.Provider>\r\n  )\r\n}\r\n\r\nexport default Collapse\r\n","import CollapseElement, { CollapseProps } from \"./collapse\"\nimport CollapseItem from \"./collapse-item\"\n\ninterface CollapseInterface {\n  (props: CollapseProps): JSX.Element\n\n  Item: typeof CollapseItem\n}\n\nconst Collapse = CollapseElement as CollapseInterface\nCollapse.Item = CollapseItem\n\nexport default Collapse\n","import { Collapse } from \"@taroify/core\"\r\nimport { QuestionOutlined, ShopOutlined } from \"@taroify/icons\"\r\nimport * as React from \"react\"\r\nimport { useState } from \"react\"\r\nimport Block from \"../../../components/block\"\r\nimport Page from \"../../../components/page\"\r\nimport \"./index.scss\"\r\n\r\nfunction BasicCollapse() {\r\n  const [value, setValue] = useState([0])\r\n  return (\r\n    <Collapse value={value} onChange={setValue}>\r\n      <Collapse.Item title=\"标题1\">代码是写出来给人看的，附带能在机器上运行</Collapse.Item>\r\n      <Collapse.Item title=\"标题2\">代码是写出来给人看的，附带能在机器上运行</Collapse.Item>\r\n      <Collapse.Item title=\"标题3\">代码是写出来给人看的，附带能在机器上运行</Collapse.Item>\r\n    </Collapse>\r\n  )\r\n}\r\n\r\nfunction AccordionCollapse() {\r\n  return (\r\n    <Collapse accordion defaultValue={0}>\r\n      <Collapse.Item title=\"标题1\">代码是写出来给人看的，附带能在机器上运行</Collapse.Item>\r\n      <Collapse.Item title=\"标题2\">代码是写出来给人看的，附带能在机器上运行</Collapse.Item>\r\n      <Collapse.Item title=\"标题3\">代码是写出来给人看的，附带能在机器上运行</Collapse.Item>\r\n    </Collapse>\r\n  )\r\n}\r\n\r\nfunction CollapseWithDisabledWithReadonly() {\r\n  return (\r\n    <Collapse defaultValue={[0]}>\r\n      <Collapse.Item title=\"正常状态\">代码是写出来给人看的，附带能在机器上运行</Collapse.Item>\r\n      <Collapse.Item title=\"只读状态\" clickable={false}>\r\n        代码是写出来给人看的，附带能在机器上运行\r\n      </Collapse.Item>\r\n      <Collapse.Item title=\"禁用状态\" disabled>\r\n        代码是写出来给人看的，附带能在机器上运行\r\n      </Collapse.Item>\r\n    </Collapse>\r\n  )\r\n}\r\n\r\nfunction CustomCollapse() {\r\n  return (\r\n    <Collapse defaultValue={[0]}>\r\n      <Collapse.Item\r\n        className=\"custom-collapse-item1\"\r\n        title={\r\n          <>\r\n            标题1\r\n            <QuestionOutlined />\r\n          </>\r\n        }\r\n      >\r\n        代码是写出来给人看的，附带能在机器上运行\r\n      </Collapse.Item>\r\n      <Collapse.Item icon={<ShopOutlined />} title=\"标题2\" extra=\"内容\" clickable={false}>\r\n        代码是写出来给人看的，附带能在机器上运行\r\n      </Collapse.Item>\r\n    </Collapse>\r\n  )\r\n}\r\n\r\nexport default function CollapseDemo() {\r\n  return (\r\n    <Page title=\"Collapse 折叠面板\" className=\"collapse-demo\">\r\n      <Block title=\"基础用法\">\r\n        <BasicCollapse />\r\n      </Block>\r\n      <Block title=\"手风琴\">\r\n        <AccordionCollapse />\r\n      </Block>\r\n      <Block title=\"只读状态和禁用状态\">\r\n        <CollapseWithDisabledWithReadonly />\r\n      </Block>\r\n      <Block title=\"自定义标题内容\">\r\n        <CustomCollapse />\r\n      </Block>\r\n    </Page>\r\n  )\r\n}\r\n"],"sourceRoot":""}