{"version":3,"sources":["webpack:///../../../../packages/core/src/utils/format/unit.ts","webpack:///../../../../packages/core/src/utils/base.ts","webpack:///../../../../packages/core/src/hooks/use-mounted.ts","webpack:///../../../../packages/core/src/hooks/use-rendered-effect.tsx","webpack:///../../../../packages/core/src/hooks/use-placeholder.tsx","webpack:///../../../../packages/core/src/hooks/use-height.ts","webpack:///../../../../packages/core/src/hooks/use-timeout.ts","webpack:///../../../../packages/core/src/hooks/use-unique-id.ts","webpack:///../../../../packages/core/src/hooks/use-update.ts","webpack:///../../../../packages/core/src/hooks/use-window-resize.tsx","webpack:///../../../../packages/core/src/utils/dom/rect.ts","webpack:///../../../../packages/icons/src/utils/index.ts","webpack:///../../../../packages/core/src/utils/dom/element.ts","webpack:///./src/components/block.tsx","webpack:///../../../../packages/core/src/styles/hairline.ts","webpack:///../../../../packages/core/src/navbar/navbar-left.tsx","webpack:///../../../../packages/core/src/navbar/navbar-right.tsx","webpack:///../../../../packages/core/src/navbar/navbar-title.tsx","webpack:///../../../../packages/core/src/navbar/navbar.tsx","webpack:///../../../../packages/core/src/navbar/index.ts","webpack:///./src/pages/navigation/navbar/index.tsx"],"names":["value","unitToPx","size","addUnitPx","width","height","convertRem","getRootFontSize","doc","document","fontSize","window","rootFontSize","parseFloat","convertPx","convertVw","convertVh","inBrowser","inWechat","process","useRenderedEffect","cb","effect","destructorRef","useRef","useEffect","nextTick","destructor","className","useState","useMounted","useHeight","children","style","useTimeout","timerRef","cbRef","msRef","argsRef","stop","useCallback","clearTimeout","start","args","setTimeout","callback","ms","restart","useMemo","useUniqueId","prefix","uniqueIdRef","updateReducer","num","useUpdate","useReducer","useWindowResize","onWindowResize","offWindowResize","top","left","right","bottom","element","elementUnref","isWindow","Promise","makeRect","resolve","queryNodesRef","isRootElement","rects","oneElement","queryAllNodesRef","isValidElement","isIconElement","cloneElement","node","oldProps","props","newProps","classNames","val","elementOrRef","ancestorCustomWrapper","ancestor","createSelectorQuery","Block","variant","title","demoPrefixClassname","HAIRLINE_BORDER","prefixClassname","HAIRLINE_BORDER_TOP","HAIRLINE_BORDER_LEFT","HAIRLINE_BORDER_BOTTOM","HAIRLINE_BORDER_SURROUND","HAIRLINE_BORDER_TOP_BOTTOM","HAIRLINE_BORDER_UNSET_TOP_BOTTOM","icon","React","cloneIconElement","Navbar","childrenProp","useNavbarChildren","__children__","undefined","Children","child","type","rootRef","Placeholder","usePlaceholder","Content","ref","fixed","titleProp","bordered","restProps","NavbarDemo","NavLeft","NavRight","Title"],"mappings":"iOA2BA,E,oCAxBM,sBACJ,YAAOA,mBAA8BC,SAA9BD,GAAP,MAGI,yBACJ,GAAI,QAA0B,IAA9B,GAAsD,CACpD,IAAME,EAAOC,UAAb,GACA,MAAO,CACLC,QADK,EAELC,SAAQH,GAGZ,SA8BF,SAASI,WAAWN,GAElB,QADAA,EAAQA,iBAARA,KAjBF,SAASO,kBACP,MAAmB,CACjB,IAAMC,EAAMC,SAAZ,gBACMC,EAAWF,kBAAsBG,2BAAvC,SAEAC,EAAeC,WAAfD,GAGF,SAUgBL,GAaZ,qBACJ,uBAAWP,EACT,EAGEA,WAAJ,MAzBF,SAASc,UAAUd,GAEjB,QADAA,EAAQA,gBAARA,KAyBSc,CAAP,GAEEd,WAAJ,OACSM,WAAP,GAEEN,WAAJ,MArBF,SAASe,UAAUf,GAEjB,QADAA,EAAQA,gBAARA,KACiBW,OAAV,WAAP,IAoBSI,CAAP,GAEEf,WAAJ,MAnBF,SAASgB,UAAUhB,GAEjB,QADAA,EAAQA,gBAARA,KACiBW,OAAV,YAAP,IAkBSK,CAAP,GAGKH,WAAP,K,mCC9EF,oEAEO,IAAMI,EAAgC,oBAAbR,YAA8BA,SAAvD,QACMS,GAAWC,G,mCCHxB,wDAEc,uBACZC,YAAkBC,EAAlBD,M,0ECoBF,IAnBA,SAASA,kBAAkBE,EAA3B,GACE,IAAMC,EAAgBC,mBAEtBC,qBACE,WAQE,OAPAC,aAAS,WACP,IAAMC,EAAaL,aAAH,EAAGA,IACf,IAAJ,KACEC,gBAIGA,EAAP,UATJE,K,8VCEY,6BAA0C,IAAEG,EAAkC,EAAlCA,UAClDvB,ECNM,sBACZ,MAA4BwB,mBAA5B,sBAAM,EAAN,KAAM,EAAN,KAMA,OALAC,aAAW,kBACT,qBACQ,qBAAGzB,UADX,KADFyB,MAKA,EDDeC,CAAf,GAEA,OAAO,gBAELC,EAFK,EAELA,SAFK,OAIL,oBAAK,CACHJ,YADG,EAEHK,QAAO,CAAE5B,SAAQA,EAAS,GAAH,OAAMF,YAAN,IAA4B,IACnD6B,WAAUA,K,aEgChB,MA/CA,SAASE,aACP,IAAMC,EAAWX,mBAEXY,EAAQZ,mBACRa,EAAQb,mBACRc,EAAUd,mBAEVe,EAAOC,uBAAY,WACnBL,EAAJ,UACEM,aAAaN,EAAbM,SACAN,oBAHJ,IAOMO,EAAQF,uBAAY,cACxB,IAAIL,EAAJ,SAGAC,YACAC,YALsF,2BAAfM,EAAe,iCAAfA,EAAe,kBAMtFL,YACAH,UAAmBS,WAAWC,EAAUC,EAAxCX,MAPF,IAUMY,EAAUP,uBACd,cAEE,GADAD,IACA,EAAc,4BAFgCI,EAEhC,iCAFgCA,EAEhC,kBACZD,EAAMG,EAAUC,EAAhBJ,QACSN,EAAJ,SACLM,EAAMN,EAAD,QAAgBC,EAAhB,QAA+BC,EAApCI,WANN,IAaA,OAAOM,mBACL,iBAAO,CACLD,YACAL,UACAH,YAEF,CAACQ,EAASL,EANZ,K,kBCjCF,MALA,SAASO,cAAiC,IAArBC,EAAqB,uDAAJ,KAC9BC,EAAc3B,iBAAO,IAA3B,IACA,OAAO2B,EAAP,SCHIC,EAAiBC,SAAjBD,cAAiBC,GAAD,OAA0BA,EAAD,GAA/C,KAQA,MANA,SAASC,YACP,MAAmBC,qBAAWH,EAA9B,GAEA,OAFA,qB,SCuBF,MAZA,SAASI,gBAAgBX,GACvBpB,qBAAU,WAGR,OAFAgC,iBAAc,IAAdA,oBAEO,yBACLC,UADK,IACLA,SADK,EACLA,YADF,MAKC,CARHjC,M,2LCHI,uBACJ,MAAO,CACLkC,MADK,EAELC,OAFK,EAGLC,QAHK,EAILC,SAJK,EAKL1D,UACAC,YAIE,oBACJ,IAAM0D,EAAUC,YAAhB,GACA,KAAa,CACX,OAAe,CACb,GAAIC,YAAJ,GAAuB,CACrB,IAAM7D,EAAQ2D,EAAd,WACM1D,EAAS0D,EAAf,YACA,OAAOG,gBAAgBC,SAAS/D,EAAhC,IAGF,OAAO8D,gBACFH,EADL,yBAIA,OAAO,IAAIG,SAAeE,YACxBC,0CAEQ,YAAC,kBAAU,EAAV,MACL,GAAIC,YAAJ,GAA4B,CAC1B,IAAM,EAAN,EAAQlE,MAAOC,EAAf,EAAeA,OACf+D,EAAQD,SAAS,EAAjBC,SAEAA,WAMZ,OAAOF,gBAAgBC,SAAS,EAAhC,IAGI,uBACJ,IAAMJ,EAAUC,YAAhB,GACA,KAAa,CACX,OAAe,CACb,IAAMO,EAAN,GAMA,OALGR,+BAESS,YAAD,OACPD,OAAYC,EAHbT,4BAKIG,gBAAP,GAEA,OAAO,IAAIA,SAAiBE,YAC1BK,YAAiBV,EAAjBU,8BAEQ,6CAAaL,EAAb,SAId,OAAOF,gBAAP,M,62CCtEI,0BAEJ,IAAKQ,yBAAL,GACE,SAEF,IAAMX,EAAN,EACA,OAAO,IAAQA,EAAR,KAAP,KAGI,+BACJ,IAAKY,cAAL,GACE,OAAO,4BAAuBC,uBAAaC,EAApC,GAAP,EAEI,IAAEjD,EAAR,EAAQA,UAAR,gCACMmC,EAAN,EACee,EAAf,EAAQC,MACFC,EAAQ,sCAEZpD,YAAWqD,IAAWH,EAAD,cAFvB,GAKA,OAAOF,uBAAab,EAApB,K,4VCnBI,qBACJ,OAAOmB,IAAP,OAOI,yBACJ,OAAIC,QACF,EAEE,YAAJ,EACSA,EAAP,QAEF,EAGI,0BACJ,OArBK,KAqBEN,aAAA,EAAAA,EAAA,WAAP,UAA+CA,aAAA,EAAAA,EAAA,SAG3C,4BACJ,OAAO,gBAAP,EAKF,SAASO,sBAAsBrB,GAC7B,OAAc,CAEZ,IADA,IAAIsB,EAAJ,EACOA,eAAwBf,cAAce,EAA7C,aACEA,EAAWA,EAAXA,WAGF,GAAIA,GAAYA,IAAhB,EACE,UAKA,0BACJ,GAAIf,cAAJ,GACE,OAAOgB,cAAP,iBAGF,IAAMD,EAAWD,sBAAjB,GACA,SACSE,gCAAiCD,EAAjCC,mBAAoDvB,EAA3D,MAGKuB,qBAA6B,IAAMvB,EAA1C,KAGI,+BACJ,GAAIO,cAAJ,GACE,OAAOgB,cAAP,iBAGF,IAAMD,EAAWD,sBAAjB,GACA,SACSE,mCAAoCD,EAApCC,mBAAuDvB,EAAvDuB,YAAP,IAGKA,wBAAgC,IAAMvB,EAAN,IAAvC,K,mJCvDa,SAASwB,MAAMR,GAAmB,MACvCnD,EAAwCmD,EAAxCnD,UAAW4D,EAA6BT,EAA7BS,QAASC,EAAoBV,EAApBU,MAAOzD,EAAa+C,EAAb/C,SACnC,OACE,eAAC,IAAD,CAAMJ,YAAWqD,IAAWS,YAAoB,SAAU9D,GAA1D,YACG6D,GAAS,cAAC,IAAD,CAAM7D,YAAW8D,YAAoB,gBAAiB1D,WAAUyD,IAC1E,cAAC,IAAD,CACE7D,YAAWqD,KAAU,mBAClBS,YAAoB,kBAAgC,SAAZF,GADtB,cAElBE,YAAoB,eAA6B,SAAZF,GAFnB,IADvB,WAMGxD,S,2DC3BT,2PAEa2D,EAAkBC,YAAxB,YACMC,EAAsB,GAAH,SAAzB,SACMC,EAAuB,GAAH,SAA1B,UACMC,EAAyB,GAAH,SAA5B,YACMC,EAA2B,GAAH,SAA9B,cACMC,EAA6B,GAAH,SAAhC,gBACMC,EAAmC,GAAH,SAAtC,uB,gsBCoBP,MAdM,uBACJ,IAAM,EAAN,EAAM,UAAN,IAAmBC,YAAnB,MAA0BC,4BAApB,MAAN,EAAyCpE,EAAzC,EAAyCA,SAAzC,gCACA,OACE,oBAAK,eAACJ,YAAWqD,IAAWW,YAAD,oBAA3B,GACGO,GAAQE,YAAiBF,EAAM,CAAEvE,YAAWgE,YAAgB,kBAC5D,8BAGC,oBAAK,CAAChE,YAAWgE,YAAZ,gBAA6C5D,WAAUA,M,meCMpE,MAfM,wBACJ,IAAM,EAAN,EAAM,YAAN,EAAM,KAAmBA,EAAzB,EAAyBA,SAAzB,4CAEA,OACE,oBAAK,eAACJ,YAAWqD,IAAWW,YAAD,qBAA3B,GACGO,GAAQE,YAAiBF,EAAM,CAAEvE,YAAWgE,YAAgB,kBAC5D,8BAGC,oBAAK,CAAChE,YAAWgE,YAAZ,gBAA6C5D,WAAUA,M,idCLpE,MALM,wBACE,IAAEJ,EAAR,EAAQA,UAAR,4CACA,OAAO,oBAAK,eAACA,YAAWqD,IAAWW,YAAD,qBAAlC,K,yfCsFF,ICvFMU,EDuCN,SAASA,OAAOvB,GACd,IAAM,EAAN,EAAM,YAAN,EAAM,WAAN,EAAM,QAAN,EAAM,cAAN,EAKEU,MACUc,EANZ,EAMEvE,SANF,sCASA,EA5CF,SAASwE,kBAAkBxE,GACzB,OAAOgB,mBAAQ,WACb,IAAMyD,EAA+B,CACnC7C,YADmC,EAEnCC,aAFmC,EAGnC4B,aAAOiB,GAiBT,OAdAC,sBAA4BC,YAC1B,GAAIlC,yBAAJ,GAA2B,CACzB,IAAMX,EAAN,EAEQ8C,EAAR,EAAQA,KACJA,IAAJ,EACEJ,SACSI,IAAJ,EACLJ,UACSI,IAAJ,IACLJ,eAIN,IACC,CAtBH,IA2C+BD,CAA/B,GAAM,EAAN,EAAM,OAAN,EAAM,MAAe3C,EAArB,EAAqBA,MACfiD,EAAUtF,mBAEVuF,EAAcC,YAAeF,EAAS,CAAElF,YAAW,wBAEnDqF,EAAUjE,mBACd,wBACE,oBAAK,eACHkE,MADG,EAEHtF,YAAWqD,IACTW,YADmB,8BAGjB,IADF,GAFmB,cAIhBA,YAAD,iBAAoCuB,GAJnB,OAFvB,GAYE,oBAAK,CAACvF,YAAWqD,IAAWW,YAAD,qBAA3B,EAEGH,QAFH,EAGI,oBAAK,CAAC7D,YAAWqD,IAAWW,YAAvB,kBAA0D5D,WAAUoF,IAjB5D,MAuBrB,CAACC,EAAUzF,EAAWuF,EAAOvD,EAAM0D,EAAWzD,EAAO4B,EAvBvD,IA0BA,OAAI0B,GAAJ,EACS,kBAAY,CAACnF,WAAUiF,IAGhC,GClFFX,YACAA,aACAA,UAEA,Q,oCCZe,SAASiB,aACtB,OACE,eAAC,IAAD,CAAM9B,QAAM,aAAa7D,YAAU,cAAnC,YACE,cAAC,IAAD,CAAO6D,QAAM,OAAb,WACE,kBAAQA,QAAM,KAAd,YACE,gBAAQ+B,QAAR,mBACA,gBAAQC,SAAR,wBAGJ,cAAC,IAAD,CAAOhC,QAAM,wBAAb,WACE,8BACE,gBAAQ+B,QAAR,mBACA,gBAAQE,MAAR,mBACA,gBAAQD,SAAR,CAAiBtB,OAAM,cAAC,SAAD","file":"chunk/86.4fb12a21.js","sourcesContent":["import * as _ from \"lodash\"\r\nimport { CSSProperties } from \"react\"\r\n\r\nexport function addUnitPx(value?: string | number): string {\r\n  return value === undefined ? \"\" : `${unitToPx(value)}px`\r\n}\r\n\r\nexport function getSizeStyle(originSize?: string | number): CSSProperties | undefined {\r\n  if (_.isNumber(originSize) || _.isString(originSize)) {\r\n    const size = addUnitPx(originSize)\r\n    return {\r\n      width: size,\r\n      height: size,\r\n    }\r\n  }\r\n  return {}\r\n}\r\n\r\nexport function getZIndexStyle(zIndex?: string | number) {\r\n  const style: CSSProperties = {}\r\n  if (zIndex !== undefined) {\r\n    style.zIndex = +zIndex\r\n  }\r\n  return style\r\n}\r\n\r\n// cache\r\nlet rootFontSize: number\r\n\r\nfunction getRootFontSize() {\r\n  if (!rootFontSize) {\r\n    const doc = document.documentElement\r\n    const fontSize = doc.style.fontSize || window.getComputedStyle(doc).fontSize\r\n\r\n    rootFontSize = parseFloat(fontSize)\r\n  }\r\n\r\n  return rootFontSize\r\n}\r\n\r\nfunction convertPx(value: string) {\r\n  value = value.replace(/px/g, \"\")\r\n  return +value\r\n}\r\n\r\nfunction convertRem(value: string) {\r\n  value = value.replace(/rem/g, \"\")\r\n  return +value * getRootFontSize()\r\n}\r\n\r\nfunction convertVw(value: string) {\r\n  value = value.replace(/vw/g, \"\")\r\n  return (+value * window.innerWidth) / 100\r\n}\r\n\r\nfunction convertVh(value: string) {\r\n  value = value.replace(/vh/g, \"\")\r\n  return (+value * window.innerHeight) / 100\r\n}\r\n\r\nexport function unitToPx(value: string | number): number {\r\n  if (typeof value === \"number\") {\r\n    return value\r\n  }\r\n\r\n  if (value.includes(\"px\")) {\r\n    return convertPx(value)\r\n  }\r\n  if (value.includes(\"rem\")) {\r\n    return convertRem(value)\r\n  }\r\n  if (value.includes(\"vw\")) {\r\n    return convertVw(value)\r\n  }\r\n  if (value.includes(\"vh\")) {\r\n    return convertVh(value)\r\n  }\r\n\r\n  return parseFloat(value)\r\n}\r\n","export function noop() {}\r\n\r\nexport const inBrowser = typeof document !== \"undefined\" && !!document.scripts\r\nexport const inWechat = process.env.TARO_ENV === \"weapp\"\r\nexport const inSwan = process.env.TARO_ENV === \"swan\"\r\nexport const inAlipay = process.env.TARO_ENV === \"alipay\"\r\nexport const inQQ = process.env.TARO_ENV === \"qq\"\r\nexport const inToutiao = process.env.TARO_ENV === \"tt\"\r\n","import useRenderedEffect from \"./use-rendered-effect\"\r\n\r\nexport default function useMounted(cb: (...args: any[]) => any) {\r\n  useRenderedEffect(cb, [])\r\n}\r\n","import { nextTick } from \"@tarojs/taro\"\r\nimport * as _ from \"lodash\"\r\nimport { DependencyList, EffectCallback, useEffect, useRef } from \"react\"\r\n\r\nfunction useRenderedEffect(effect: EffectCallback, deps?: DependencyList) {\r\n  const destructorRef = useRef<() => void>()\r\n\r\n  useEffect(\r\n    () => {\r\n      nextTick(() => {\r\n        const destructor = effect?.()\r\n        if (_.isFunction(destructor)) {\r\n          destructorRef.current = destructor\r\n        }\r\n      })\r\n\r\n      return destructorRef.current\r\n    },\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    deps,\r\n  )\r\n}\r\n\r\nexport default useRenderedEffect\r\n","import { View } from \"@tarojs/components\"\r\nimport * as React from \"react\"\r\nimport { addUnitPx } from \"../utils/format/unit\"\r\nimport useHeight from \"./use-height\"\r\n\r\ninterface UsePlaceholderOptions {\r\n  className?: string\r\n}\r\n\r\nexport default function usePlaceholder(contentRef: any, { className }: UsePlaceholderOptions) {\r\n  const height = useHeight(contentRef)\r\n\r\n  return ({\r\n    // @ts-ignore\r\n    children,\r\n  }) => (\r\n    <View\r\n      className={className}\r\n      style={{ height: height ? `${addUnitPx(height)}` : \"\" }}\r\n      children={children}\r\n    />\r\n  )\r\n}\r\n","import { useState } from \"react\"\r\nimport { getRect } from \"../utils/dom/rect\"\r\nimport useMounted from \"./use-mounted\"\r\n\r\nexport default function useHeight(elementOrRef: any) {\r\n  const [height, setHeight] = useState<number>(0)\r\n  useMounted(() =>\r\n    getRect(elementOrRef)\r\n      .then(({ height }) => height)\r\n      .then(setHeight),\r\n  )\r\n  return height\r\n}\r\n","import { useCallback, useMemo, useRef } from \"react\"\r\n\r\ntype UseTimeoutCallback = (...args: any[]) => void\r\n\r\nfunction useTimeout() {\r\n  const timerRef = useRef<NodeJS.Timeout>()\r\n\r\n  const cbRef = useRef<UseTimeoutCallback>()\r\n  const msRef = useRef<number>()\r\n  const argsRef = useRef<any[]>()\r\n\r\n  const stop = useCallback(() => {\r\n    if (timerRef.current) {\r\n      clearTimeout(timerRef.current)\r\n      timerRef.current = undefined\r\n    }\r\n  }, [])\r\n\r\n  const start = useCallback((callback: UseTimeoutCallback, ms?: number, ...args: any[]) => {\r\n    if (timerRef.current) {\r\n      return\r\n    }\r\n    cbRef.current = callback\r\n    msRef.current = ms\r\n    argsRef.current = args\r\n    timerRef.current = setTimeout(callback, ms, args)\r\n  }, [])\r\n\r\n  const restart = useCallback(\r\n    (callback?: UseTimeoutCallback, ms?: number, ...args: any[]) => {\r\n      stop()\r\n      if (callback) {\r\n        start(callback, ms, args)\r\n      } else if (cbRef.current) {\r\n        start(cbRef.current, msRef.current, argsRef.current)\r\n      }\r\n    },\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    [],\r\n  )\r\n\r\n  return useMemo(\r\n    () => ({\r\n      restart,\r\n      start,\r\n      stop,\r\n    }),\r\n    [restart, start, stop],\r\n  )\r\n}\r\n\r\nexport default useTimeout\r\n","import * as _ from \"lodash\"\r\nimport { useRef } from \"react\"\r\n\r\nfunction useUniqueId(prefix: string = \"t_\") {\r\n  const uniqueIdRef = useRef(_.uniqueId(prefix))\r\n  return uniqueIdRef.current\r\n}\r\n\r\nexport default useUniqueId\r\n","import { useReducer } from \"react\"\r\n\r\nconst updateReducer = (num: number): number => (num + 1) % 1_000_000\r\n\r\nfunction useUpdate(): () => void {\r\n  const [, update] = useReducer(updateReducer, 0)\r\n\r\n  return update\r\n}\r\n\r\nexport default useUpdate\r\n","import { offWindowResize, onWindowResize } from \"@tarojs/taro\"\r\nimport { useEffect } from \"react\"\r\n\r\ninterface Size {\r\n  /** 变化后的窗口高度，单位 px */\r\n  windowHeight: number\r\n  /** 变化后的窗口宽度，单位 px */\r\n  windowWidth: number\r\n}\r\n\r\ninterface CallbackResult {\r\n  size: Size\r\n}\r\n\r\ntype WindowResizeCallback = (result: CallbackResult) => void\r\n\r\nfunction useWindowResize(callback: WindowResizeCallback) {\r\n  useEffect(() => {\r\n    onWindowResize?.(callback)\r\n\r\n    return () =>\r\n      offWindowResize?.(\r\n        // @ts-ignore\r\n        callback,\r\n      )\r\n  }, [callback])\r\n}\r\n\r\nexport default useWindowResize\r\n","import { inBrowser } from \"../base\"\r\nimport { queryNodesRef, elementUnref, isRootElement, isWindow, queryAllNodesRef } from \"./element\"\r\n\r\nexport interface Rect {\r\n  dataset: Record<string, any>\r\n  id: string\r\n  top: number\r\n  right: number\r\n  bottom: number\r\n  left: number\r\n  width: number\r\n  height: number\r\n}\r\n\r\nexport function makeRect(width: number, height: number) {\r\n  return {\r\n    top: 0,\r\n    left: 0,\r\n    right: width,\r\n    bottom: height,\r\n    width,\r\n    height,\r\n  } as Rect\r\n}\r\n\r\nexport function getRect(elementOrRef: any): Promise<Rect> {\r\n  const element = elementUnref(elementOrRef)\r\n  if (element) {\r\n    if (inBrowser) {\r\n      if (isWindow(element)) {\r\n        const width = element.innerWidth\r\n        const height = element.innerHeight\r\n        return Promise.resolve(makeRect(width, height))\r\n      }\r\n\r\n      return Promise.resolve(\r\n        (((element as unknown) as HTMLElement).getBoundingClientRect() as unknown) as Rect,\r\n      )\r\n    } else {\r\n      return new Promise<Rect>((resolve) => {\r\n        queryNodesRef(element)\r\n          .boundingClientRect()\r\n          .exec(([rect]) => {\r\n            if (isRootElement(element)) {\r\n              const { width, height } = rect\r\n              resolve(makeRect(width, height))\r\n            } else {\r\n              resolve(rect)\r\n            }\r\n          })\r\n      })\r\n    }\r\n  }\r\n  return Promise.resolve(makeRect(0, 0))\r\n}\r\n\r\nexport function getRects(elementOrRef: any, selector: string): Promise<Rect[]> {\r\n  const element = elementUnref(elementOrRef)\r\n  if (element) {\r\n    if (inBrowser) {\r\n      const rects: Rect[] = []\r\n      ;((element as unknown) as HTMLElement)\r\n        .querySelectorAll(selector)\r\n        .forEach((oneElement) =>\r\n          rects.push((oneElement.getBoundingClientRect() as unknown) as Rect),\r\n        )\r\n      return Promise.resolve(rects)\r\n    } else {\r\n      return new Promise<Rect[]>((resolve) => {\r\n        queryAllNodesRef(element, selector)\r\n          .boundingClientRect()\r\n          .exec(([rects]) => resolve((rects as unknown) as Rect[]))\r\n      })\r\n    }\r\n  }\r\n  return Promise.resolve([])\r\n}\r\n","import classNames from \"classnames\"\nimport * as _ from \"lodash\"\nimport { cloneElement, isValidElement, ReactElement, ReactNode } from \"react\"\nimport { ICON_TYPE, IconProps } from \"../shared\"\n\nexport function isIconElement(node?: ReactNode): boolean {\n  // Is`t not ReactElement\n  if (!isValidElement(node)) {\n    return false\n  }\n  const element = node as ReactElement\n  return _.hasIn(element.type, ICON_TYPE)\n}\n\nexport function cloneIconElement(node: ReactNode, props: IconProps): ReactNode {\n  if (!isIconElement(node)) {\n    return isValidElement(node) ? cloneElement(node, props) : node\n  }\n  const { className, ...restProps } = props\n  const element = node as ReactElement\n  const { props: oldProps } = element\n  const newProps: IconProps = {\n    ...oldProps,\n    className: classNames(oldProps.className, className),\n    ...restProps,\n  }\n  return cloneElement(element, newProps)\n}\n","import { TaroElement } from \"@tarojs/runtime\"\r\nimport { createSelectorQuery } from \"@tarojs/taro\"\r\nimport * as _ from \"lodash\"\r\nimport { inWechat } from \"../base\"\r\n\r\nexport const ELEMENT_NODE_TYPE = 1\r\n\r\nexport function isWindow(val: unknown): val is Window {\r\n  return val === window\r\n}\r\n\r\nexport function isBodyElement(val: unknown): boolean {\r\n  return val === document.body\r\n}\r\n\r\nexport function elementUnref(elementOrRef: any): TaroElement {\r\n  if (elementOrRef === undefined || elementOrRef === null) {\r\n    return elementOrRef\r\n  }\r\n  if (\"current\" in elementOrRef) {\r\n    return elementOrRef.current\r\n  }\r\n  return elementOrRef\r\n}\r\n\r\nexport function isRootElement(node?: TaroElement) {\r\n  return node?.nodeType === ELEMENT_NODE_TYPE && node?.tagName === \"ROOT\"\r\n}\r\n\r\nexport function matchSelector(aSelector?: string, bSelector?: string) {\r\n  return _.replace(aSelector as string, \"#\", \"\") === bSelector\r\n}\r\n\r\n// Fix nested in CustomWrapper is undefined\r\n// See: https://github.com/mallfoundry/taroify/pull/143\r\nfunction ancestorCustomWrapper(element: TaroElement) {\r\n  if (inWechat) {\r\n    let ancestor = element\r\n    while (ancestor.parentNode && !isRootElement(ancestor.parentNode as TaroElement)) {\r\n      ancestor = ancestor.parentNode as TaroElement\r\n    }\r\n\r\n    if (ancestor && ancestor !== element) {\r\n      return ancestor\r\n    }\r\n  }\r\n}\r\n\r\nexport function queryNodesRef(element: TaroElement) {\r\n  if (isRootElement(element)) {\r\n    return createSelectorQuery().selectViewport()\r\n  }\r\n\r\n  const ancestor = ancestorCustomWrapper(element)\r\n  if (ancestor) {\r\n    return createSelectorQuery().select(`#${ancestor.uid}>>>#${element.uid}`)\r\n  }\r\n\r\n  return createSelectorQuery().select(\"#\" + element.uid)\r\n}\r\n\r\nexport function queryAllNodesRef(element: TaroElement, selector?: string) {\r\n  if (isRootElement(element)) {\r\n    return createSelectorQuery().selectViewport()\r\n  }\r\n\r\n  const ancestor = ancestorCustomWrapper(element)\r\n  if (ancestor) {\r\n    return createSelectorQuery().selectAll(`#${ancestor.uid}>>>#${element.uid}${selector}`)\r\n  }\r\n\r\n  return createSelectorQuery().selectAll(\"#\" + element.uid + selector)\r\n}\r\n","import { View } from \"@tarojs/components\"\r\nimport classNames from \"classnames\"\r\nimport * as React from \"react\"\r\nimport { ReactNode } from \"react\"\r\nimport { demoPrefixClassname } from \"../styles/prefix\"\r\nimport \"./block.scss\"\r\n\r\ntype BlockVariant = \"card\"\r\n\r\ninterface BlockProps {\r\n  className?: string\r\n  variant?: BlockVariant\r\n  title?: ReactNode\r\n  children?: ReactNode\r\n}\r\n\r\nexport default function Block(props: BlockProps) {\r\n  const { className, variant, title, children } = props\r\n  return (\r\n    <View className={classNames(demoPrefixClassname(\"block\"), className)}>\r\n      {title && <View className={demoPrefixClassname(\"block__title\")} children={title} />}\r\n      <View\r\n        className={classNames({\r\n          [demoPrefixClassname(\"block__content\")]: variant !== \"card\",\r\n          [demoPrefixClassname(\"block__card\")]: variant === \"card\",\r\n        })}\r\n      >\r\n        {children}\r\n      </View>\r\n    </View>\r\n  )\r\n}\r\n","import { prefixClassname } from \"./prefix\"\n\nexport const HAIRLINE_BORDER = prefixClassname(\"hairline\")\nexport const HAIRLINE_BORDER_TOP = `${HAIRLINE_BORDER}--top`\nexport const HAIRLINE_BORDER_LEFT = `${HAIRLINE_BORDER}--left`\nexport const HAIRLINE_BORDER_BOTTOM = `${HAIRLINE_BORDER}--bottom`\nexport const HAIRLINE_BORDER_SURROUND = `${HAIRLINE_BORDER}--surround`\nexport const HAIRLINE_BORDER_TOP_BOTTOM = `${HAIRLINE_BORDER}--top-bottom`\nexport const HAIRLINE_BORDER_UNSET_TOP_BOTTOM = `${HAIRLINE_BORDER}-unset--top-bottom`\n","import { ArrowLeft } from \"@taroify/icons\"\r\nimport { cloneIconElement } from \"@taroify/icons/utils\"\r\nimport { View } from \"@tarojs/components\"\r\nimport { ViewProps } from \"@tarojs/components/types/View\"\r\nimport classNames from \"classnames\"\r\nimport * as React from \"react\"\r\nimport { isValidElement, ReactNode } from \"react\"\r\nimport { prefixClassname } from \"../styles\"\r\n\r\ninterface NavBarLeftProps extends ViewProps {\r\n  icon?: ReactNode\r\n  children?: ReactNode\r\n}\r\n\r\nexport function NavBarLeft(props: NavBarLeftProps) {\r\n  const { className, icon = <ArrowLeft />, children, ...restProps } = props\r\n  return (\r\n    <View className={classNames(prefixClassname(\"navbar__left\"), className)} {...restProps}>\r\n      {icon && cloneIconElement(icon, { className: prefixClassname(\"navbar__icon\") })}\r\n      {isValidElement(children) ? (\r\n        children\r\n      ) : (\r\n        <View className={prefixClassname(\"navbar__text\")} children={children} />\r\n      )}\r\n    </View>\r\n  )\r\n}\r\n\r\nexport default NavBarLeft\r\n","import { cloneIconElement } from \"@taroify/icons/utils\"\r\nimport { View } from \"@tarojs/components\"\r\nimport { ViewProps } from \"@tarojs/components/types/View\"\r\nimport classNames from \"classnames\"\r\nimport * as React from \"react\"\r\nimport { isValidElement, ReactNode } from \"react\"\r\nimport { prefixClassname } from \"../styles\"\r\n\r\ninterface NavBarRightProps extends ViewProps {\r\n  icon?: ReactNode\r\n  children?: ReactNode\r\n}\r\n\r\nexport function NavBarRight(props: NavBarRightProps) {\r\n  const { className, icon, children, ...restProps } = props\r\n\r\n  return (\r\n    <View className={classNames(prefixClassname(\"navbar__right\"), className)} {...restProps}>\r\n      {icon && cloneIconElement(icon, { className: prefixClassname(\"navbar__icon\") })}\r\n      {isValidElement(children) ? (\r\n        children\r\n      ) : (\r\n        <View className={prefixClassname(\"navbar__text\")} children={children} />\r\n      )}\r\n    </View>\r\n  )\r\n}\r\n\r\nexport default NavBarRight\r\n","import { View } from \"@tarojs/components\"\r\nimport { ViewProps } from \"@tarojs/components/types/View\"\r\nimport classNames from \"classnames\"\r\nimport * as React from \"react\"\r\nimport { ReactNode } from \"react\"\r\nimport { prefixClassname } from \"../styles\"\r\n\r\ninterface NavBarTitleProps extends ViewProps {\r\n  className?: string\r\n  children?: ReactNode\r\n}\r\n\r\nexport function NavBarTitle(props: NavBarTitleProps) {\r\n  const { className, ...restProps } = props\r\n  return <View className={classNames(prefixClassname(\"navbar__title\"), className)} {...restProps} />\r\n}\r\n\r\nexport default NavBarTitle\r\n","import { View } from \"@tarojs/components\"\r\nimport { ViewProps } from \"@tarojs/components/types/View\"\r\nimport classNames from \"classnames\"\r\nimport * as React from \"react\"\r\nimport { Children, isValidElement, ReactElement, ReactNode, useMemo, useRef } from \"react\"\r\nimport { usePlaceholder } from \"../hooks\"\r\nimport { prefixClassname } from \"../styles\"\r\nimport { HAIRLINE_BORDER_BOTTOM } from \"../styles/hairline\"\r\nimport NavBarLeft from \"./navbar-left\"\r\nimport NavBarRight from \"./navbar-right\"\r\nimport NavBarTitle from \"./navbar-title\"\r\n\r\ninterface NavbarChildren {\r\n  left?: ReactNode\r\n  right?: ReactNode\r\n  title?: ReactNode\r\n}\r\n\r\nfunction useNavbarChildren(children?: ReactNode): NavbarChildren {\r\n  return useMemo(() => {\r\n    const __children__: NavbarChildren = {\r\n      left: undefined,\r\n      right: undefined,\r\n      title: undefined,\r\n    }\r\n\r\n    Children.forEach(children, (child: ReactNode) => {\r\n      if (isValidElement(child)) {\r\n        const element = child as ReactElement\r\n\r\n        const { type } = element\r\n        if (type === NavBarLeft) {\r\n          __children__.left = element\r\n        } else if (type === NavBarRight) {\r\n          __children__.right = element\r\n        } else if (type === NavBarTitle) {\r\n          __children__.title = element\r\n        }\r\n      }\r\n    })\r\n    return __children__\r\n  }, [children])\r\n}\r\n\r\nexport interface NavbarProps extends ViewProps {\r\n  bordered?: boolean\r\n  placeholder?: boolean\r\n  fixed?: boolean\r\n  title?: ReactNode\r\n  children?: ReactNode\r\n}\r\n\r\nfunction Navbar(props: NavbarProps) {\r\n  const {\r\n    className,\r\n    bordered,\r\n    fixed,\r\n    placeholder,\r\n    title: titleProp,\r\n    children: childrenProp,\r\n    ...restProps\r\n  } = props\r\n  const { left, title, right } = useNavbarChildren(childrenProp)\r\n  const rootRef = useRef()\r\n\r\n  const Placeholder = usePlaceholder(rootRef, { className: \"navbar__placeholder\" })\r\n\r\n  const Content = useMemo(\r\n    () => (\r\n      <View\r\n        ref={rootRef}\r\n        className={classNames(\r\n          prefixClassname(\"navbar\"),\r\n          {\r\n            [HAIRLINE_BORDER_BOTTOM]: bordered,\r\n            [prefixClassname(\"navbar--fixed\")]: fixed,\r\n          },\r\n          className,\r\n        )}\r\n        {...restProps}\r\n      >\r\n        <View className={classNames(prefixClassname(\"navbar__content\"))}>\r\n          {left}\r\n          {title ?? (\r\n            <View className={classNames(prefixClassname(\"navbar__title\"))} children={titleProp} />\r\n          )}\r\n          {right}\r\n        </View>\r\n      </View>\r\n    ),\r\n    [bordered, className, fixed, left, restProps, right, title, titleProp],\r\n  )\r\n\r\n  if (fixed && placeholder) {\r\n    return <Placeholder children={Content} />\r\n  }\r\n\r\n  return Content\r\n}\r\n\r\nexport default Navbar\r\n","import NavbarComponent, { NavbarProps } from \"./navbar\"\r\nimport NavBarLeft from \"./navbar-left\"\r\nimport NavBarRight from \"./navbar-right\"\r\nimport NavBarTitle from \"./navbar-title\"\r\n\r\ninterface NavbarInterface {\r\n  (props: NavbarProps): JSX.Element\r\n\r\n  NavLeft: typeof NavBarLeft\r\n  NavRight: typeof NavBarRight\r\n  Title: typeof NavBarTitle\r\n}\r\n\r\nconst Navbar = NavbarComponent as NavbarInterface\r\n\r\nNavbar.NavLeft = NavBarLeft\r\nNavbar.NavRight = NavBarRight\r\nNavbar.Title = NavBarTitle\r\n\r\nexport default Navbar\r\n","import { Navbar } from \"@taroify/core\"\r\nimport { Search } from \"@taroify/icons\"\r\nimport * as React from \"react\"\r\nimport Block from \"../../../components/block\"\r\nimport Page from \"../../../components/page\"\r\nimport \"./index.scss\"\r\n\r\nexport default function NavbarDemo() {\r\n  return (\r\n    <Page title=\"Navbar 导航栏\" className=\"navbar-demo\">\r\n      <Block title=\"基础用法\">\r\n        <Navbar title=\"标题\">\r\n          <Navbar.NavLeft>返回</Navbar.NavLeft>\r\n          <Navbar.NavRight>按钮</Navbar.NavRight>\r\n        </Navbar>\r\n      </Block>\r\n      <Block title=\"使用 NavLeft 和 NavRight\">\r\n        <Navbar>\r\n          <Navbar.NavLeft>返回</Navbar.NavLeft>\r\n          <Navbar.Title>标题</Navbar.Title>\r\n          <Navbar.NavRight icon={<Search />} />\r\n        </Navbar>\r\n      </Block>\r\n    </Page>\r\n  )\r\n}\r\n"],"sourceRoot":""}