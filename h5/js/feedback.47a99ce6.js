(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["feedback"],{"0c4b":function(e,t,a){"use strict";a.r(t);var n=a("7a23"),c={class:"feedback"},i={class:"feedback__header"},u=Object(n["k"])("div",{class:"feedback__header__title"},"反馈意见",-1),r={class:"feed-back__header__count"},d=Object(n["j"])("/2000 "),s={class:"feedback__img"},b={class:"feedback__phone"},l=Object(n["k"])("span",{class:"feedback__phone__hint"},"联系方式",-1),o=Object(n["j"])(" 提交 ");function f(e,t,a,f,j,O){var v=Object(n["H"])("van-nav-bar"),k=Object(n["H"])("van-field"),m=Object(n["H"])("van-uploader"),p=Object(n["H"])("van-button");return Object(n["z"])(),Object(n["f"])("div",c,[Object(n["k"])(v,{title:"意见反馈","left-text":"","left-arrow":"",onClickLeft:t[1]||(t[1]=function(t){return e.$router.back()}),fixed:""}),Object(n["k"])("div",i,[u,Object(n["k"])("div",null,[Object(n["k"])("span",r,Object(n["K"])(e.wordCount),1),d])]),Object(n["k"])(k,{modelValue:e.state.question,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.state.question=t}),modelModifiers:{trim:!0},rows:"5",autosize:"",type:"textarea",maxlength:"2000",placeholder:"请填写10字以上的问题描述，以便我们更好的帮助您解决问题"},null,8,["modelValue"]),Object(n["k"])("div",s,[Object(n["k"])(m,{icon:"plus",modelValue:e.imageUrls,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.imageUrls=t}),"after-read":e.afterRead,"max-count":1},null,8,["modelValue","after-read"])]),Object(n["k"])("div",b,[l,Object(n["k"])(k,{name:"mobile",modelValue:e.state.mobile,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.state.mobile=t}),placeholder:"请填写您的手机号，方便我们与您联系"},null,8,["modelValue"])]),Object(n["k"])(p,{"native-type":"submit",disabled:e.disabled,loading:e.loading,onClick:e.feedbackSubmit,class:"feedback__submit",type:"primary"},{default:Object(n["P"])((function(){return[o]})),_:1},8,["disabled","loading","onClick"])])}var j,O=a("ade3"),v=(a("66b9"),a("b650")),k=(a("e930"),a("8f80")),m=(a("be7f"),a("565f")),p=(a("e7e5"),a("d399")),_=(a("5246"),a("6b41")),g=(a("b0c0"),a("d3b7"),a("33cb")),h=a("dd4e"),w=a("6c02"),y=Object(n["l"])({name:"Feedback",components:(j={},Object(O["a"])(j,_["a"].name,_["a"]),Object(O["a"])(j,p["a"].name,p["a"]),Object(O["a"])(j,m["a"].name,m["a"]),Object(O["a"])(j,k["a"].name,k["a"]),Object(O["a"])(j,v["b"].name,v["b"]),j),setup:function(){var e=Object(w["d"])(),t=e.back,a=Object(n["E"])([]),c=Object(n["E"])(!1),i=Object(n["E"])(!1),u=Object(n["D"])({question:"",mobile:"",imgUrl:""}),r=Object(n["d"])((function(){var e;return null===(e=u.question)||void 0===e?void 0:e.length}));function d(e){e.status="uploading",e.message="上传中...",c.value=!0,g["a"].upload({file:e.file}).then((function(t){var a=t.status,n=t.message,c=t.data;if(200!==a)return Object(p["a"])(n),e.status="failed",void(e.message="上传失败");e.status="",c.imgUrl&&(u.imgUrl=c.imgUrl)})).finally((function(){c.value=!1}))}var s=function(){var e,a,n=null===(e=u.question)||void 0===e?void 0:e.length;if(void 0!==n)if(n<11)Object(p["a"])("请输入10字以上反馈内容");else{var c=null!==(a=u.mobile)&&void 0!==a?a:"";/^1[3456789]\d{9}$/.test(c)?(i.value=!0,h["a"].addFeedback(u).then((function(e){var a=e.status,n=e.message;Object(p["a"])(n),200===a&&t()})).finally((function(){i.value=!1}))):Object(p["a"])("请输入正确的手机号")}else Object(p["a"])("请输入10字以上反馈内容")};return{wordCount:r,feedbackSubmit:s,imageUrls:a,disabled:c,loading:i,afterRead:d,state:u}}});a("b984");y.render=f;t["default"]=y},"33cb":function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a("d4ec"),c=a("bee2"),i=a("e8aa"),u=function(){function e(){Object(n["a"])(this,e)}return Object(c["a"])(e,null,[{key:"upload",value:function(e){var t=new FormData;return t.append("file",e.file),i["a"].post("/users/upload.php",t).then((function(e){var t=e.data;return t}))}}]),e}()},"3b19":function(e,t,a){"use strict";a("aee9")},6311:function(e,t,a){},"714f":function(e,t,a){"use strict";a("e42a")},a4e3:function(e,t,a){"use strict";a.r(t);var n=a("7a23"),c={class:"feedback-list"},i=Object(n["k"])("div",{class:"feedback-list__bottom"},"没有更多啦",-1);function u(e,t,a,u,r,d){var s=Object(n["H"])("van-nav-bar"),b=Object(n["H"])("feedback-card");return Object(n["z"])(),Object(n["f"])("div",c,[Object(n["k"])(s,{title:"反馈结果","left-text":"","left-arrow":"",onClickLeft:t[1]||(t[1]=function(t){return e.$router.back()})}),(Object(n["z"])(!0),Object(n["f"])(n["a"],null,Object(n["F"])(e.state,(function(e){return Object(n["z"])(),Object(n["f"])(b,{key:e.id,question:e.question,status:e.status,updatetime:e.updatetime,answer:e.answer},null,8,["question","status","updatetime","answer"])})),128)),i])}var r=a("ade3"),d=(a("e7e5"),a("d399")),s=(a("5246"),a("6b41")),b=(a("b0c0"),a("d3b7"),{class:"feedback-card"}),l={class:"feedback-card__title"},o={class:"feedback-card__title__l"},f={class:"feedback-card__title__r"},j={class:"feedback-card__time"};function O(e,t,a,c,i,u){return Object(n["z"])(),Object(n["f"])("div",b,[Object(n["k"])("div",l,[Object(n["k"])("div",o,Object(n["K"])(e.question),1),Object(n["k"])("div",f,Object(n["K"])(e.status),1)]),Object(n["k"])("div",j,Object(n["K"])(e.updatetime),1),Object(n["Q"])(Object(n["k"])("div",{class:"feedback-card__value"},"回复: "+Object(n["K"])(e.answer),513),[[n["M"],e.showAnswer]])])}var v=Object(n["l"])({name:"FeedbackCard",props:{question:String,status:String,updatetime:String,answer:String},setup:function(e){var t=Object(n["E"])(!0);return"未处理"===e.status&&(t.value=!1),{showAnswer:t}}});a("714f");v.render=O;var k,m=v,p=a("dd4e"),_=Object(n["l"])({name:"FeedbackList",components:(k={FeedbackCard:m},Object(r["a"])(k,s["a"].name,s["a"]),Object(r["a"])(k,d["a"].name,d["a"]),k),setup:function(){var e=Object(n["E"])([]);function t(){var t=Object(d["a"])({type:"loading",forbidClick:!0,loadingType:"spinner"});p["a"].getFeedback().then((function(t){var a=t.status,n=t.data,c=t.message;200===a?e.value=n:Object(d["a"])(c)})).finally((function(){t.clear()}))}return Object(n["w"])(t),{state:e}}});a("3b19");_.render=u;t["default"]=_},aee9:function(e,t,a){},b984:function(e,t,a){"use strict";a("6311")},dd4e:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a("d4ec"),c=a("bee2"),i=a("e8aa"),u=function(){function e(){Object(n["a"])(this,e)}return Object(c["a"])(e,null,[{key:"addFeedback",value:function(e){return i["a"].post("/users/feedback.php",e).then((function(e){var t=e.data;return t}))}},{key:"getFeedback",value:function(){return i["a"].post("/users/feedbackList.php").then((function(e){var t=e.data;return t}))}}]),e}()},e42a:function(e,t,a){}}]);
//# sourceMappingURL=feedback.47a99ce6.js.map