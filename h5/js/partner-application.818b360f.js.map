{"version":3,"sources":["webpack:///./src/views/partner/PartnerApplication.vue?5737","webpack:///./node_modules/lodash/isUndefined.js","webpack:///./src/views/partner/PartnerApplication.vue","webpack:///./src/services/partner.ts","webpack:///./src/views/partner/PartnerApplication.vue?36d8","webpack:///./src/views/partner/PartnerApplication.vue?321b","webpack:///./src/views/partner/partner-application.jpg"],"names":["isUndefined","value","undefined","module","exports","class","title","border","left-text","left-arrow","fixed","placeholder","$router","back","src","state","name","mobile","round","type","loading","onSubmit","form","client","post","then","data","components","props","avatar","String","setup","test","applyPartner","content","status","message","finally","render"],"mappings":"uHAAA,W,qBCiBA,SAASA,EAAYC,GACnB,YAAiBC,IAAVD,EAGTE,EAAOC,QAAUJ,G,iGCpBVK,MAAM,uB,GAWJA,MAAM,gC,iBAI+D,M,4MAf5E,eAkBM,MAlBN,EAkBM,CAjBJ,eAQE,GAPAC,MAAM,QACLC,QAAQ,EACTC,YAAU,GACVC,aAAA,GACAC,MAAA,GACAC,YAAA,GACC,YAAU,+BAAE,EAAAC,QAAQC,WAEvB,eAAyD,GAA7CC,IAAK,EAAQ,S,gBACzB,eAMM,MANN,EAMM,CALJ,eAIW,GAJDT,MAAM,6BAA2B,C,wBACzC,iBAAwD,CAAxD,eAAwD,G,WAA/B,EAAAU,MAAMC,K,qDAAN,EAAAD,MAAMC,KAAI,I,eAAxB,UAA0BL,YAAY,M,uBACjD,eAA2D,G,WAAlC,EAAAI,MAAME,O,qDAAN,EAAAF,MAAME,OAAM,I,eAA1B,UAA4BN,YAAY,O,uBACnD,eAAqF,GAAzEO,MAAA,GAAMC,KAAK,UAAWC,QAAS,EAAAA,QAAU,QAAO,EAAAC,U,yBAAU,iBAAE,C,4SCR3D,E,uGACZ,SAAoBC,GACzB,OAAOC,EAAA,KAAOC,KAAK,gBAAiBF,GAAMG,MAAK,gBAAGC,EAAH,EAAGA,KAAH,OAAcA,S,iBCHlD,iBAAgB,CAC7BV,KAAM,qBACNW,YAAU,sBACP,OAAOX,KADA,yBAEP,OAASA,KAFF,yBAGP,OAAOA,KAHA,yBAIP,OAAKA,KAJE,yBAKP,OAAMA,KALC,WAOVY,MAAO,CACLC,OAAQC,QAEVC,MAZ6B,WAa3B,MAAiB,iBAATlB,EAAR,EAAQA,KACFO,EAAU,gBAAI,GAEdL,EAAQ,eAAS,CACrBC,KAAM,GACNC,OAAQ,KAGV,SAASI,IACH,IAAUN,EAAMC,OAAS,IAAcD,EAAMC,MAC/C,eAAM,UAGH,oBAAoBgB,KAAKjB,EAAME,SAKpCG,EAAQnB,OAAQ,EAChB,EAAegC,aAAa,CAAEhB,OAAQF,EAAME,OAAQD,KAAMD,EAAMC,KAAMkB,QAAS,KAC5ET,MAAK,YAAwB,IAArBU,EAAqB,EAArBA,OAAQC,EAAa,EAAbA,QACf,eAAMA,GACS,MAAXD,GACFtB,OAGHwB,SAAQ,WACPjB,EAAQnB,OAAQ,MAblB,eAAM,YAiBV,MAAO,CACLmB,UACAL,QACAM,e,UCjDN,EAAOiB,OAASA,EAED,gB,uBCPfnC,EAAOC,QAAU,IAA0B","file":"js/partner-application.818b360f.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./PartnerApplication.vue?vue&type=style&index=0&id=c43e4160&lang=scss\"","/**\n * Checks if `value` is `undefined`.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `undefined`, else `false`.\n * @example\n *\n * _.isUndefined(void 0);\n * // => true\n *\n * _.isUndefined(null);\n * // => false\n */\nfunction isUndefined(value) {\n  return value === undefined;\n}\n\nmodule.exports = isUndefined;\n","<template>\n  <div class=\"partner-application\">\n    <van-nav-bar\n      title=\"合作商申请\"\n      :border=\"false\"\n      left-text=\"\"\n      left-arrow\n      fixed\n      placeholder\n      @click-left=\"$router.back()\"\n    />\n    <van-image :src=\"require('./partner-application.jpg')\" />\n    <div class=\"partner-application__actions\">\n      <van-form class=\"partner-application__form\">\n        <van-field v-model.trim=\"state.name\" placeholder=\"姓名\" />\n        <van-field v-model.trim=\"state.mobile\" placeholder=\"手机号\" />\n        <van-button round type=\"primary\" :loading=\"loading\" @click=\"onSubmit\">申请</van-button>\n      </van-form>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, reactive, ref } from \"vue\"\nimport { Button, Field, Form, Image as VanImage, NavBar, Toast } from \"vant\"\nimport PartnerService from \"@/services/partner\"\nimport { useRouter } from \"vue-router\"\nimport _ from \"lodash\"\n\nexport default defineComponent({\n  name: \"PartnerApplication\",\n  components: {\n    [NavBar.name]: NavBar,\n    [VanImage.name]: VanImage,\n    [Button.name]: Button,\n    [Form.name]: Form,\n    [Field.name]: Field,\n  },\n  props: {\n    avatar: String,\n  },\n  setup() {\n    const { back } = useRouter()\n    const loading = ref(false)\n\n    const state = reactive({\n      name: \"\",\n      mobile: \"\",\n    })\n\n    function onSubmit() {\n      if (_.isEmpty(state.name) || _.isUndefined(state.name)) {\n        Toast(\"姓名不能为空\")\n        return\n      }\n      if (!/^1[3456789]\\d{9}$/.test(state.mobile)) {\n        Toast(\"手机号格式不正确\")\n        return\n      }\n\n      loading.value = true\n      PartnerService.applyPartner({ mobile: state.mobile, name: state.name, content: \"\" })\n        .then(({ status, message }) => {\n          Toast(message)\n          if (status === 200) {\n            back()\n          }\n        })\n        .finally(() => {\n          loading.value = false\n        })\n    }\n\n    return {\n      loading,\n      state,\n      onSubmit,\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import \"../../styles/prefix\";\n@import \"../../styles/variables\";\n\n.partner-application {\n  display: flex;\n  position: relative;\n  overflow: hidden;\n\n  .van-nav-bar {\n    .van-icon {\n      color: $black;\n    }\n\n    &__title {\n      font-weight: bold;\n    }\n  }\n\n  .van-image {\n    width: 100%;\n  }\n\n  &__form {\n    .van-field {\n      margin-bottom: $margin-md;\n      border-radius: $border-radius-md;\n    }\n  }\n\n  &__actions {\n    position: absolute;\n    bottom: 0;\n    right: 0;\n    left: 0;\n    width: 100%;\n    padding: $padding-sm;\n    box-sizing: border-box;\n\n    .van-button {\n      display: block;\n      border-radius: $border-radius-md;\n      width: 100%;\n      background: #857cb7;\n      border: none 0;\n      color: $white;\n      font-size: $font-size-lg;\n      font-weight: bold;\n    }\n  }\n}\n</style>\n","import client, { ClientResponse } from \"@/services/client\"\n\nexport interface PartnerApplicationForm {\n  name?: string\n  mobile?: string\n  content?: string\n}\n\nexport default class PartnerService {\n  public static applyPartner(form: PartnerApplicationForm): Promise<ClientResponse<void>> {\n    return client.post(\"/api/team.php\", form).then(({ data }) => data)\n  }\n}\n","\nimport { defineComponent, reactive, ref } from \"vue\"\nimport { Button, Field, Form, Image as VanImage, NavBar, Toast } from \"vant\"\nimport PartnerService from \"@/services/partner\"\nimport { useRouter } from \"vue-router\"\nimport _ from \"lodash\"\n\nexport default defineComponent({\n  name: \"PartnerApplication\",\n  components: {\n    [NavBar.name]: NavBar,\n    [VanImage.name]: VanImage,\n    [Button.name]: Button,\n    [Form.name]: Form,\n    [Field.name]: Field,\n  },\n  props: {\n    avatar: String,\n  },\n  setup() {\n    const { back } = useRouter()\n    const loading = ref(false)\n\n    const state = reactive({\n      name: \"\",\n      mobile: \"\",\n    })\n\n    function onSubmit() {\n      if (_.isEmpty(state.name) || _.isUndefined(state.name)) {\n        Toast(\"姓名不能为空\")\n        return\n      }\n      if (!/^1[3456789]\\d{9}$/.test(state.mobile)) {\n        Toast(\"手机号格式不正确\")\n        return\n      }\n\n      loading.value = true\n      PartnerService.applyPartner({ mobile: state.mobile, name: state.name, content: \"\" })\n        .then(({ status, message }) => {\n          Toast(message)\n          if (status === 200) {\n            back()\n          }\n        })\n        .finally(() => {\n          loading.value = false\n        })\n    }\n\n    return {\n      loading,\n      state,\n      onSubmit,\n    }\n  },\n})\n","import { render } from \"./PartnerApplication.vue?vue&type=template&id=c43e4160\"\nimport script from \"./PartnerApplication.vue?vue&type=script&lang=ts\"\nexport * from \"./PartnerApplication.vue?vue&type=script&lang=ts\"\n\nimport \"./PartnerApplication.vue?vue&type=style&index=0&id=c43e4160&lang=scss\"\nscript.render = render\n\nexport default script","module.exports = __webpack_public_path__ + \"img/partner-application.a8bdb412.jpg\";"],"sourceRoot":""}