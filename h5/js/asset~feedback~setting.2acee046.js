(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["asset~feedback~setting"],{"504b":function(e,t,a){},"8f80":function(e,t,a){"use strict";var i=a("c199"),o=a("7a23"),r=a("db17"),l=a("8da3"),n=a("ea8e"),s=a("d282"),[c,u]=Object(s["a"])("uploader");function d(e){return Array.isArray(e)?e:[e]}function v(e,t){return new Promise(a=>{if("file"!==t){var i=new FileReader;i.onload=e=>{a(e.target.result)},"dataUrl"===t?i.readAsDataURL(e):"text"===t&&i.readAsText(e)}else a()})}function m(e,t){return d(e).some(e=>e.file&&e.file.size>t)}function p(e,t){var a=[],i=[];return e.forEach(e=>{e.file&&e.file.size>t?i.push(e):a.push(e)}),{valid:a,invalid:i}}var b=/\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg)/i;function g(e){return b.test(e)}function f(e){return!!e.isImage||(e.file&&e.file.type?0===e.file.type.indexOf("image"):e.url?g(e.url):"string"===typeof e.content&&0===e.content.indexOf("data:image"))}var O=a("4eda"),h=a("3c42"),j=a("ad06"),w=a("1da4"),y=a("7e3e"),k=a("2eaa"),x=a("5596"),S=a("e41f"),z=a("482d"),N=a("1325"),C=a("cdd8"),I=a("44bf"),P=a("543e"),R=a("2bb1");function A(e){return Math.sqrt(Math.pow(e[0].clientX-e[1].clientX,2)+Math.pow(e[0].clientY-e[1].clientY,2))}var X,D=Object(s["a"])("image-preview")[1],T=Object(o["l"])({props:{src:String,show:Boolean,active:Number,minZoom:{type:[Number,String],required:!0},maxZoom:{type:[Number,String],required:!0},rootWidth:{type:Number,required:!0},rootHeight:{type:Number,required:!0}},emits:["scale","close"],setup(e,{emit:t}){var a,i,r,l,n,s,c=Object(o["D"])({scale:1,moveX:0,moveY:0,moving:!1,zooming:!1,imageRatio:0,displayWidth:0,displayHeight:0}),u=Object(C["a"])(),d=Object(o["d"])(()=>{var{rootWidth:t,rootHeight:a}=e,i=a/t;return c.imageRatio>i}),v=Object(o["d"])(()=>{var{scale:e,moveX:t,moveY:a,moving:i,zooming:o}=c,r={transitionDuration:o||i?"0s":".3s"};if(1!==e){var l=t/e,n=a/e;r.transform="scale("+e+", "+e+") translate("+l+"px, "+n+"px)"}return r}),m=Object(o["d"])(()=>{if(c.imageRatio){var{rootWidth:t,rootHeight:a}=e,i=d.value?a/c.imageRatio:t;return Math.max(0,(c.scale*i-t)/2)}return 0}),p=Object(o["d"])(()=>{if(c.imageRatio){var{rootWidth:t,rootHeight:a}=e,i=d.value?a:t*c.imageRatio;return Math.max(0,(c.scale*i-a)/2)}return 0}),b=a=>{a=Object(z["b"])(a,+e.minZoom,+e.maxZoom),a!==c.scale&&(c.scale=a,t("scale",{scale:a,index:e.active}))},g=()=>{b(1),c.moveX=0,c.moveY=0},f=()=>{var e=c.scale>1?1:2;b(e),c.moveX=0,c.moveY=0},O=e=>{var{touches:t}=e,{offsetX:o}=u;u.start(e),a=c.moveX,i=c.moveY,s=Date.now(),c.moving=1===t.length&&1!==c.scale,c.zooming=2===t.length&&!o.value,c.zooming&&(r=c.scale,l=A(e.touches))},h=e=>{var{touches:t}=e;if(u.move(e),(c.moving||c.zooming)&&Object(N["a"])(e,!0),c.moving){var{deltaX:o,deltaY:n}=u,s=o.value+a,d=n.value+i;c.moveX=Object(z["b"])(s,-m.value,m.value),c.moveY=Object(z["b"])(d,-p.value,p.value)}if(c.zooming&&2===t.length){var v=A(t),g=r*v/l;b(g)}},j=()=>{var{offsetX:e,offsetY:a}=u,i=Date.now()-s,o=250,r=10;e.value<r&&a.value<r&&i<o&&(n?(clearTimeout(n),n=null,f()):n=setTimeout(()=>{t("close"),n=null},o))},w=e=>{var t=!1;(c.moving||c.zooming)&&(t=!0,c.moving&&a===c.moveX&&i===c.moveY&&(t=!1),e.touches.length||(c.zooming&&(c.moveX=Object(z["b"])(c.moveX,-m.value,m.value),c.moveY=Object(z["b"])(c.moveY,-p.value,p.value),c.zooming=!1),c.moving=!1,a=0,i=0,r=1,c.scale<1&&g())),Object(N["a"])(e,t),j(),u.reset()},y=e=>{var{naturalWidth:t,naturalHeight:a}=e.target;c.imageRatio=a/t};return Object(o["N"])(()=>e.active,g),Object(o["N"])(()=>e.show,e=>{e||g()}),()=>{var t={loading:()=>Object(o["k"])(P["a"],{type:"spinner"},null)};return Object(o["k"])(R["a"],{class:D("swipe-item"),onTouchstart:O,onTouchmove:h,onTouchend:w,onTouchcancel:w},{default:()=>[Object(o["k"])(I["a"],{src:e.src,fit:"contain",class:D("image",{vertical:d.value}),style:v.value,onLoad:y},t)]})}}}),[V,F]=Object(s["a"])("image-preview"),Y=Object(o["l"])({name:V,props:{show:Boolean,loop:r["f"],overlay:r["f"],closeable:Boolean,showIndex:r["f"],className:r["g"],transition:String,beforeClose:Function,overlayStyle:Object,showIndicators:Boolean,closeOnPopstate:r["f"],images:{type:Array,default:()=>[]},minZoom:{type:[Number,String],default:1/3},maxZoom:{type:[Number,String],default:3},swipeDuration:{type:[Number,String],default:300},startPosition:{type:[Number,String],default:0},closeIcon:{type:String,default:"clear"},closeIconPosition:{type:String,default:"top-right"}},emits:["scale","close","closed","change","update:show"],setup(e,{emit:t,slots:a}){var i=Object(o["E"])(),l=Object(k["a"])(),n=Object(o["D"])({active:0,rootWidth:0,rootHeight:0}),s=()=>{if(i.value){var e=i.value.$el.getBoundingClientRect();n.rootWidth=e.width,n.rootHeight=e.height,i.value.resize()}},c=e=>t("scale",e),u=e=>t("update:show",e),d=()=>{Object(y["a"])({interceptor:e.beforeClose,args:[n.active],done:()=>u(!1)})},v=e=>{e!==n.active&&(n.active=e,t("change",e))},m=()=>{if(e.showIndex)return Object(o["k"])("div",{class:F("index")},[a.index?a.index({index:n.active}):n.active+1+" / "+e.images.length])},p=()=>{if(a.cover)return Object(o["k"])("div",{class:F("cover")},[a.cover()])},b=()=>Object(o["k"])(x["a"],{ref:i,lazyRender:!0,loop:e.loop,class:F("swipe"),duration:e.swipeDuration,initialSwipe:e.startPosition,showIndicators:e.showIndicators,indicatorColor:"white",onChange:v},{default:()=>[e.images.map(t=>Object(o["k"])(T,{src:t,show:e.show,active:n.active,maxZoom:e.maxZoom,minZoom:e.minZoom,rootWidth:n.rootWidth,rootHeight:n.rootHeight,onScale:c,onClose:d},null))]}),g=()=>{if(e.closeable)return Object(o["k"])(j["a"],{role:"button",name:e.closeIcon,class:F("close-icon",e.closeIconPosition),onClick:d},null)},f=()=>t("closed"),h=(e,t)=>{var a;return null==(a=i.value)?void 0:a.swipeTo(e,t)};return Object(O["a"])({swipeTo:h}),Object(o["w"])(s),Object(o["N"])([l.width,l.height],s),Object(o["N"])(()=>e.startPosition,e=>v(+e)),Object(o["N"])(()=>e.show,a=>{var{images:i,startPosition:r}=e;a?(v(+r),Object(o["r"])(()=>{s(),h(+r,{immediate:!0})})):t("close",{index:n.active,url:i[n.active]})}),()=>Object(o["k"])(S["a"],Object(o["q"])({class:[F(),e.className],overlayClass:F("overlay"),onClosed:f},Object(r["e"])(e,["show","transition","overlayStyle","closeOnPopstate"]),{"onUpdate:show":u}),{default:()=>[g(),b(),m(),p()]})}}),Z={loop:!0,images:[],maxZoom:3,minZoom:1/3,onScale:void 0,onClose:void 0,onChange:void 0,teleport:"body",className:"",showIndex:!0,closeable:!1,closeIcon:"clear",transition:void 0,beforeClose:void 0,overlayStyle:void 0,startPosition:0,swipeDuration:300,showIndicators:!1,closeOnPopstate:!0,closeIconPosition:"top-right"};function B(){({instance:X}=Object(w["a"])({setup(){var{state:e,toggle:t}=Object(w["b"])(),a=()=>{e.images=[]};return()=>Object(o["k"])(Y,Object(o["q"])(e,{onClosed:a,"onUpdate:show":t}),null)}}))}var H=(e,t=0)=>{if(r["c"]){X||B();var a=Array.isArray(e)?{images:e,startPosition:t}:e;return X.open(Object(r["a"])({},Z,a)),X}};H.Component=Object(i["a"])(Y),H.install=e=>{e.use(Object(i["a"])(Y))};var W=Object(o["l"])({props:{name:[Number,String],index:Number,imageFit:String,lazyLoad:Boolean,deletable:Boolean,previewSize:[Number,String],beforeDelete:Function,item:{type:Object,required:!0}},emits:["delete","preview"],setup(e,{emit:t,slots:a}){var i=()=>{var{status:t,message:a}=e.item;if("uploading"===t||"failed"===t){var i="failed"===t?Object(o["k"])(j["a"],{name:"close",class:u("mask-icon")},null):Object(o["k"])(P["a"],{class:u("loading")},null),r=Object(l["a"])(a)&&""!==a;return Object(o["k"])("div",{class:u("mask")},[i,r&&Object(o["k"])("div",{class:u("mask-message")},[a])])}},s=a=>{var{name:i,item:o,index:r,beforeDelete:l}=e;a.stopPropagation(),Object(y["a"])({interceptor:l,args:[o,{name:i,index:r}],done:()=>t("delete")})},c=()=>t("preview"),d=()=>{if(e.deletable&&"uploading"!==e.item.status)return Object(o["k"])("div",{class:u("preview-delete"),onClick:s},[Object(o["k"])(j["a"],{name:"cross",class:u("preview-delete-icon")},null)])},v=()=>{if(a["preview-cover"]){var{index:t,item:i}=e;return Object(o["k"])("div",{class:u("preview-cover")},[a["preview-cover"](Object(r["a"])({index:t},i))])}},m=()=>{var{item:t}=e;return f(t)?Object(o["k"])(I["a"],{fit:e.imageFit,src:t.content||t.url,class:u("preview-image"),width:e.previewSize,height:e.previewSize,lazyLoad:e.lazyLoad,onClick:c},{default:()=>[v()]}):Object(o["k"])("div",{class:u("file"),style:Object(n["b"])(e.previewSize)},[Object(o["k"])(j["a"],{class:u("file-icon"),name:"description"},null),Object(o["k"])("div",{class:[u("file-name"),"van-ellipsis"]},[t.file?t.file.name:t.url]),v()])};return()=>Object(o["k"])("div",{class:u("preview")},[m(),i(),d()])}}),q=Object(o["l"])({name:c,props:{capture:String,multiple:Boolean,disabled:Boolean,lazyLoad:Boolean,uploadText:String,deletable:r["f"],afterRead:Function,showUpload:r["f"],beforeRead:Function,beforeDelete:Function,previewSize:[Number,String],previewImage:r["f"],previewOptions:Object,previewFullImage:r["f"],name:{type:[Number,String],default:""},accept:{type:String,default:"image/*"},modelValue:{type:Array,default:()=>[]},maxSize:{type:[Number,String],default:Number.MAX_VALUE},maxCount:{type:[Number,String],default:Number.MAX_VALUE},imageFit:{type:String,default:"cover"},resultType:{type:String,default:"dataUrl"},uploadIcon:{type:String,default:"photograph"}},emits:["delete","oversize","close-preview","click-preview","update:modelValue"],setup(e,{emit:t,slots:a}){var i,s=Object(o["E"])(),c=(t=e.modelValue.length)=>({name:e.name,index:t}),b=()=>{s.value&&(s.value.value="")},g=a=>{if(b(),m(a,e.maxSize)){if(!Array.isArray(a))return void t("oversize",a,c());var i=p(a,e.maxSize);if(a=i.valid,t("oversize",i.invalid,c()),!a.length)return}a=Object(o["D"])(a),t("update:modelValue",[...e.modelValue,...d(a)]),e.afterRead&&e.afterRead(a,c())},w=t=>{var{maxCount:a,modelValue:i,resultType:o}=e;if(Array.isArray(t)){var r=+a-i.length;t.length>r&&(t=t.slice(0,r)),Promise.all(t.map(e=>v(e,o))).then(e=>{var a=t.map((t,a)=>{var i={file:t,status:"",message:""};return e[a]&&(i.content=e[a]),i});g(a)})}else v(t,o).then(e=>{var a={file:t,status:"",message:""};e&&(a.content=e),g(a)})},y=t=>{var{files:a}=t.target;if(!e.disabled&&a&&a.length){var i=1===a.length?a[0]:[].slice.call(a);if(e.beforeRead){var o=e.beforeRead(i,c());if(!o)return void b();if(Object(l["f"])(o))return void o.then(e=>{w(e||i)}).catch(b)}w(i)}},k=()=>t("close-preview"),x=t=>{if(e.previewFullImage){var a=e.modelValue.filter(f),o=a.map(e=>e.content||e.url).filter(Boolean);i=H(Object(r["a"])({images:o,startPosition:a.indexOf(t),onClose:k},e.previewOptions))}},S=()=>{i&&i.close()},z=(a,i)=>{var o=e.modelValue.slice(0);o.splice(i,1),t("update:modelValue",o),t("delete",a,c(i))},N=(i,l)=>{var n=["imageFit","deletable","previewSize","beforeDelete"],s=Object(r["a"])(Object(r["e"])(e,n),Object(r["e"])(i,n,!0));return Object(o["k"])(W,Object(o["q"])({item:i,index:l,onClick:()=>t("click-preview",i,c(l)),onDelete:()=>z(i,l),onPreview:()=>x(i)},Object(r["e"])(e,["name","lazyLoad"]),s),{"preview-cover":a["preview-cover"]})},C=()=>{if(e.previewImage)return e.modelValue.map(N)},I=()=>{if(!(e.modelValue.length>=e.maxCount)&&e.showUpload){var t=Object(o["k"])("input",{ref:s,type:"file",class:u("input"),accept:e.accept,capture:e.capture,multiple:e.multiple,disabled:e.disabled,onChange:y},null);return a.default?Object(o["k"])("div",{class:u("input-wrapper")},[a.default(),t]):Object(o["k"])("div",{class:u("upload"),style:Object(n["b"])(e.previewSize)},[Object(o["k"])(j["a"],{name:e.uploadIcon,class:u("upload-icon")},null),e.uploadText&&Object(o["k"])("span",{class:u("upload-text")},[e.uploadText]),t])}},P=()=>{s.value&&!e.disabled&&s.value.click()};return Object(O["a"])({chooseFile:P,closeImagePreview:S}),Object(h["c"])(()=>e.modelValue),()=>Object(o["k"])("div",{class:u()},[Object(o["k"])("div",{class:u("wrapper",{disabled:e.disabled})},[C(),I()])])}}),L=Object(i["a"])(q);t["a"]=L},bcd3:function(e,t,a){},e930:function(e,t,a){"use strict";a("68ef"),a("cb51"),a("3743"),a("09fe"),a("e3b3"),a("a71a"),a("4d75"),a("8270"),a("786d"),a("504b"),a("bcd3")}}]);
//# sourceMappingURL=asset~feedback~setting.2acee046.js.map